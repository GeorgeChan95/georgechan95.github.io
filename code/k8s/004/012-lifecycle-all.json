{"apiVersion":"v1","kind":"Pod","metadata":{"name":"lifecycle-pod","namespace":"default","labels":{"app":"myapp"}},"spec":{"containers":[{"name":"busybox-container","image":"wangyanglinux/tools:busybox","imagePullPolicy":"IfNotPresent","command":["/bin/sh","-c","touch /tmp/live ; sleep 600; rm -rf /tmp/live; sleep 3600"],"livenessProbe":{"exec":{"command":["test","-e","/tmp/live"]},"initialDelaySeconds":1,"periodSeconds":3},"lifecycle":{"postStart":{"httpGet":{"port":1234,"host":"192.168.6.139","path":"index.html"}},"preStop":{"httpGet":{"port":1234,"host":"192.168.6.139","path":"hostname.html"}}}},{"name":"myapp-container","image":"wangyanglinux/myapp:v1.0","imagePullPolicy":"IfNotPresent","livenessProbe":{"httpGet":{"port":80,"path":"/index.html"},"initialDelaySeconds":1,"periodSeconds":3,"timeoutSeconds":3},"readinessProbe":{"httpGet":{"port":80,"path":"/index1.html"},"initialDelaySeconds":1,"periodSeconds":3,"timeoutSeconds":3}}],"initContainers":[{"name":"init-myservice","image":"wangyanglinux/tools:busybox","imagePullPolicy":"IfNotPresent","command":["sh","-c","until nslookup myservice; do echo waiting for myservice; sleep 2; done;"]},{"name":"init-mydb","image":"wangyanglinux/tools:busybox","command":["sh","-c","until nslookup mydb; do echo waiting for mydb; sleep 2; done;"]}]}}