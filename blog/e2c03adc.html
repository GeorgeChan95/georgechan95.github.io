<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>021-K8S-安全参数 | George&#39;s Blog</title>
  <meta name="google-site-verification" content="RobLWkyyFziZxPJ4I887QROdX8XrYthcJwWTcuH0wwQ" />
  <meta name="msvalidate.01" content="626D541C48E5D151F52CECC2C6714BD4" />
  <meta name="360-site-verification" content="c838adf8357ca2f614d08ad5235a1717" />
  <meta name="keywords" content=" linux , Docker , Rocky ">
  <meta name="description" content="021-K8S-安全参数 | George&#39;s Blog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="一、下载Python开发环境 官网：https:&#x2F;&#x2F;www.python.org&#x2F; 文档下载地址：https:&#x2F;&#x2F;www.python.org&#x2F;doc&#x2F;   下载地址： https:&#x2F;&#x2F;www.python.org&#x2F;downloads&#x2F; 历史版本下载：https:&#x2F;&#x2F;www.python.org&#x2F;downloads&#x2F;windows&#x2F;   二、安装Python开发环境     三、验证Python开">
<meta property="og:type" content="article">
<meta property="og:title" content="002-安装Python开发环境">
<meta property="og:url" content="https://georgechan95.github.io/blog/7591dd09.html">
<meta property="og:site_name" content="George&#39;s Blog">
<meta property="og:description" content="一、下载Python开发环境 官网：https:&#x2F;&#x2F;www.python.org&#x2F; 文档下载地址：https:&#x2F;&#x2F;www.python.org&#x2F;doc&#x2F;   下载地址： https:&#x2F;&#x2F;www.python.org&#x2F;downloads&#x2F; 历史版本下载：https:&#x2F;&#x2F;www.python.org&#x2F;downloads&#x2F;windows&#x2F;   二、安装Python开发环境     三、验证Python开">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/09/07/20250907-104643.png">
<meta property="og:image" content="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/09/07/20250907-104733.png">
<meta property="og:image" content="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/09/07/20250907-104943.png">
<meta property="og:image" content="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/09/08/20250908-201043.png">
<meta property="og:image" content="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/09/08/20250908-201244.png">
<meta property="og:image" content="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/09/08/20250908-201528.png">
<meta property="og:image" content="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/09/08/20250908-201506.png">
<meta property="og:image" content="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/09/08/20250908-201750.png">
<meta property="og:image" content="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/09/08/20250908-201910.png">
<meta property="article:published_time" content="2025-09-08T12:22:00.000Z">
<meta property="article:modified_time" content="2025-09-08T12:30:31.296Z">
<meta property="article:author" content="George">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/09/07/20250907-104643.png">


<link rel="icon" href="/img/favicon.png">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/sublime.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="George's Blog" type="application/atom+xml">
</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<script src="/js/image-loader.js"></script>
<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>George</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/GeorgeChan95"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <a title="email"
               href="mailto:george_95@126.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(117)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="设计模式">
            
            设计模式
            <small>(24)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="算法">
            
            算法
            <small>(5)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="Docker">
            
            Docker
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="Hexo">
            <i class="fold iconfont icon-right"></i>
            Hexo
            <small>(5)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="Hexo&lt;---&gt;Typora">
            
            Typora
            <small>(1)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="JUC">
            
            JUC
            <small>(24)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="JVM">
            
            JVM
            <small>(27)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="k8s">
            
            k8s
            <small>(21)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="linux">
            
            linux
            <small>(4)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="neo4j">
            
            neo4j
            <small>(3)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="Python">
            
            Python
            <small>(2)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="UML">
            
            UML
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  site_url"
               
               href="/about">关于</a>
        
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="117">
<input type="hidden" id="yelog_site_word_count" value="577.3k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>插入排序</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>二分法</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>二进制</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>合并有序链表</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>科学上网</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>链表</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>冒泡排序</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>设计模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>双亲委派机制</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>算法</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>位运算</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>选择排序</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>github</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>github pages</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Harbor</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>hexo</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>java</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jenkins</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>juc</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jvm</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>linux</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Loki</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>neo4j</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Pod</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Prometheus</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Python</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Rocky</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>sitemap</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SpringBoot</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>typora</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ubuntu18</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>UML</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="全部文章 Python "
           href="/blog/7591dd09.html"
           data-tag="Python"
           data-author="" >
            <span class="post-title" title="002-安装Python开发环境">002-安装Python开发环境</span>
            <span class="post-date" title="2025-09-08 20:22:00">2025/09/08</span>
        </a>
        
        
        <a  class="全部文章 Python "
           href="/blog/95026633.html"
           data-tag="Python"
           data-author="" >
            <span class="post-title" title="001-Python语言概述">001-Python语言概述</span>
            <span class="post-date" title="2025-09-07 10:44:00">2025/09/07</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/e2c03adc.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="021-K8S-安全参数">021-K8S-安全参数</span>
            <span class="post-date" title="2025-08-23 14:43:00">2025/08/23</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/88f4f580.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="020-K8S-审计">020-K8S-审计</span>
            <span class="post-date" title="2025-08-10 14:43:00">2025/08/10</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/9bea6e2e.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="019-K8S-kubectl端口转发">019-K8S-kubectl端口转发</span>
            <span class="post-date" title="2025-08-04 23:02:00">2025/08/04</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/af9812e0.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="018-K8S-临时容器">018-K8S-临时容器</span>
            <span class="post-date" title="2025-08-03 22:01:00">2025/08/03</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/99657768.html"
           data-tag="linux,Docker,Rocky,Pod"
           data-author="" >
            <span class="post-title" title="017-K8S-网络策略NetworkPolicy">017-K8S-网络策略NetworkPolicy</span>
            <span class="post-date" title="2025-07-28 21:33:00">2025/07/28</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/c9536d9e.html"
           data-tag="linux,Docker,Rocky,Pod"
           data-author="" >
            <span class="post-title" title="016-K8S-固定Pod IP地址，基于Calico插件">016-K8S-固定Pod IP地址，基于Calico插件</span>
            <span class="post-date" title="2025-07-26 13:35:00">2025/07/26</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/e62b8338.html"
           data-tag="linux,Docker,Rocky,Prometheus"
           data-author="" >
            <span class="post-title" title="015-K8S-Prometheus部署及监控告警">015-K8S-Prometheus部署及监控告警</span>
            <span class="post-date" title="2025-07-19 16:39:00">2025/07/19</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/f8cf646f.html"
           data-tag="linux,Docker,Rocky,Loki"
           data-author="" >
            <span class="post-title" title="014-K8S-部署Loki+Promtail+Grafana实现日志监控">014-K8S-部署Loki+Promtail+Grafana实现日志监控</span>
            <span class="post-date" title="2025-07-10 21:00:00">2025/07/10</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/3fee6d19.html"
           data-tag="linux,Docker,Rocky,Harbor"
           data-author="" >
            <span class="post-title" title="013-K8S-使用Helm安装Harbor">013-K8S-使用Helm安装Harbor</span>
            <span class="post-date" title="2025-07-07 22:37:00">2025/07/07</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/b42f2c7b.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="012-新建Node节点添加到K8S集群中">012-新建Node节点添加到K8S集群中</span>
            <span class="post-date" title="2025-07-07 20:32:00">2025/07/07</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/6436eaf1.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="011-Kubernetes Ingress-Nginx">011-Kubernetes Ingress-Nginx</span>
            <span class="post-date" title="2025-06-25 19:42:00">2025/06/25</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/d8e3c7b3.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="010-Kubernetes Helm">010-Kubernetes Helm</span>
            <span class="post-date" title="2025-06-21 14:12:00">2025/06/21</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/424f1119.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="009-Kubernetes 集群安全机制">009-Kubernetes 集群安全机制</span>
            <span class="post-date" title="2025-06-14 09:18:00">2025/06/14</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/f2285a2d.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="008-Kubernetes 调度器">008-Kubernetes 调度器</span>
            <span class="post-date" title="2025-06-02 14:40:00">2025/06/02</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/ef156b88.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="007-Kubernetes 存储">007-Kubernetes 存储</span>
            <span class="post-date" title="2025-05-02 10:26:00">2025/05/02</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/970719d6.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="006-Kubernetes Service">006-Kubernetes Service</span>
            <span class="post-date" title="2025-04-28 22:10:00">2025/04/28</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/c790096a.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="005-Kubernetes控制器">005-Kubernetes控制器</span>
            <span class="post-date" title="2025-04-02 20:12:00">2025/04/02</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/79e06aab.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="004-Pod的生命周期">004-Pod的生命周期</span>
            <span class="post-date" title="2025-03-22 09:05:00">2025/03/22</span>
        </a>
        
        
        <a  class="全部文章 Docker "
           href="/blog/b01d5c62.html"
           data-tag="linux,Docker,科学上网"
           data-author="" >
            <span class="post-title" title="Docker配置网络代理实现外网镜像下载">Docker配置网络代理实现外网镜像下载</span>
            <span class="post-date" title="2025-01-08 23:00:00">2025/01/08</span>
        </a>
        
        
        <a  class="全部文章 linux "
           href="/blog/7f174b3e.html"
           data-tag="linux,科学上网,Rocky"
           data-author="" >
            <span class="post-title" title="Rocky9安装Shadowsocks实现科学上网">Rocky9安装Shadowsocks实现科学上网</span>
            <span class="post-date" title="2025-01-08 21:09:00">2025/01/08</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/b00f53e9.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="003-基于Rocky9.3系统使用kubeadm安装k8s1.29集群">003-基于Rocky9.3系统使用kubeadm安装k8s1.29集群</span>
            <span class="post-date" title="2025-01-03 22:05:00">2025/01/03</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/3c79d8d9.html"
           data-tag="linux,Docker,Rocky"
           data-author="" >
            <span class="post-title" title="002-Rocky9.3系统初始化设置和Docker安装">002-Rocky9.3系统初始化设置和Docker安装</span>
            <span class="post-date" title="2025-01-02 13:25:00">2025/01/02</span>
        </a>
        
        
        <a  class="全部文章 k8s "
           href="/blog/7e3a5200.html"
           data-tag="linux,Rocky"
           data-author="" >
            <span class="post-title" title="001-ESXi8安装Rocky9.3虚拟机">001-ESXi8安装Rocky9.3虚拟机</span>
            <span class="post-date" title="2025-01-02 09:34:00">2025/01/02</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/77d85f50.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="25-责任链模式">25-责任链模式</span>
            <span class="post-date" title="2024-12-03 21:08:00">2024/12/03</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/fcec839d.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="24-策略模式">24-策略模式</span>
            <span class="post-date" title="2024-12-02 18:16:00">2024/12/02</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/6109865a.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="23-状态模式">23-状态模式</span>
            <span class="post-date" title="2024-11-29 19:30:00">2024/11/29</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/58d4db7.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="22-解释器模式">22-解释器模式</span>
            <span class="post-date" title="2024-11-28 22:00:00">2024/11/28</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/a5cf7eb4.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="21-备忘录模式">21-备忘录模式</span>
            <span class="post-date" title="2024-11-27 21:40:00">2024/11/27</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/3148d6be.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="20-中介者模式">20-中介者模式</span>
            <span class="post-date" title="2024-11-26 20:35:00">2024/11/26</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/f06aea0b.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="19-观察者模式">19-观察者模式</span>
            <span class="post-date" title="2024-11-25 21:07:00">2024/11/25</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/7dbd9149.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="18-迭代器模式">18-迭代器模式</span>
            <span class="post-date" title="2024-11-24 00:02:00">2024/11/24</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/4fdf6e52.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="17-访问者模式">17-访问者模式</span>
            <span class="post-date" title="2024-11-23 21:55:00">2024/11/23</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/60fd53f.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="16-命令模式">16-命令模式</span>
            <span class="post-date" title="2024-11-23 20:30:00">2024/11/23</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/4930323d.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="15-模板方法模式">15-模板方法模式</span>
            <span class="post-date" title="2024-11-23 19:40:00">2024/11/23</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/e4235185.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="14-代理模式">14-代理模式</span>
            <span class="post-date" title="2024-11-21 23:16:00">2024/11/21</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/1b225c1f.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="13-享元模式">13-享元模式</span>
            <span class="post-date" title="2024-11-20 23:10:00">2024/11/20</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/906e9e8b.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="12-外观模式">12-外观模式</span>
            <span class="post-date" title="2024-11-20 22:09:00">2024/11/20</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/c456a66a.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="11-组合模式">11-组合模式</span>
            <span class="post-date" title="2024-11-16 17:00:00">2024/11/16</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/90213fc6.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="10-装饰器模式">10-装饰器模式</span>
            <span class="post-date" title="2024-11-16 14:06:00">2024/11/16</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/c7419cfa.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="09-桥接模式">09-桥接模式</span>
            <span class="post-date" title="2024-11-14 20:51:00">2024/11/14</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/f77fc055.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="08-适配器模式">08-适配器模式</span>
            <span class="post-date" title="2024-11-12 22:55:00">2024/11/12</span>
        </a>
        
        
        <a  class="全部文章 neo4j "
           href="/blog/a3b0b090.html"
           data-tag="SpringBoot,neo4j"
           data-author="" >
            <span class="post-title" title="Spring Boot对Neo4j节点关系的增删改查">Spring Boot对Neo4j节点关系的增删改查</span>
            <span class="post-date" title="2024-11-12 21:00:30">2024/11/12</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/3ab9aa56.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="07-建造者模式">07-建造者模式</span>
            <span class="post-date" title="2024-11-11 21:55:00">2024/11/11</span>
        </a>
        
        
        <a  class="全部文章 neo4j "
           href="/blog/7dc0fcde.html"
           data-tag="SpringBoot,neo4j"
           data-author="" >
            <span class="post-title" title="Spring Boot整合Neo4j实现增删改查">Spring Boot整合Neo4j实现增删改查</span>
            <span class="post-date" title="2024-11-07 19:04:30">2024/11/07</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/564adc33.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="06-原型模式">06-原型模式</span>
            <span class="post-date" title="2024-11-06 19:00:00">2024/11/06</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/effeea78.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="05-工厂模式">05-工厂模式</span>
            <span class="post-date" title="2024-11-04 21:00:00">2024/11/04</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/d7e99843.html"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="04-单例模式">04-单例模式</span>
            <span class="post-date" title="2024-11-04 19:00:00">2024/11/04</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/90f1850a.html"
           data-tag="设计模式,UML"
           data-author="" >
            <span class="post-title" title="03-UML类图">03-UML类图</span>
            <span class="post-date" title="2024-11-02 14:57:00">2024/11/02</span>
        </a>
        
        
        <a  class="全部文章 UML "
           href="/blog/c13304c1.html"
           data-tag="设计模式,UML"
           data-author="" >
            <span class="post-title" title="02-UML图绘制工具">02-UML图绘制工具</span>
            <span class="post-date" title="2024-11-02 09:57:00">2024/11/02</span>
        </a>
        
        
        <a  class="全部文章 linux "
           href="/blog/2e826df1.html"
           data-tag="linux,ubuntu18"
           data-author="" >
            <span class="post-title" title="Docker环境下RTSP流转RTMP和HLS">Docker环境下RTSP流转RTMP和HLS</span>
            <span class="post-date" title="2024-11-01 15:17:33">2024/11/01</span>
        </a>
        
        
        <a  class="全部文章 设计模式 "
           href="/blog/cd625bba.html"
           data-tag="设计模式,java"
           data-author="" >
            <span class="post-title" title="01-设计模式六大原则">01-设计模式六大原则</span>
            <span class="post-date" title="2024-10-31 17:00:00">2024/10/31</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/1a649f4c.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="13-JUC进阶-ReentrantReadWriteLock与StampedLock">13-JUC进阶-ReentrantReadWriteLock与StampedLock</span>
            <span class="post-date" title="2024-10-19 09:26:00">2024/10/19</span>
        </a>
        
        
        <a  class="全部文章 neo4j "
           href="/blog/5c93903a.html"
           data-tag="linux,neo4j"
           data-author="" >
            <span class="post-title" title="Docker部署Neo4j并导入CSV数据">Docker部署Neo4j并导入CSV数据</span>
            <span class="post-date" title="2024-10-17 15:00:30">2024/10/17</span>
        </a>
        
        
        <a  class="全部文章 linux "
           href="/blog/ad38e6b1.html"
           data-tag="linux,ubuntu18"
           data-author="" >
            <span class="post-title" title="Ubuntu18.04离线源环境搭建">Ubuntu18.04离线源环境搭建</span>
            <span class="post-date" title="2024-10-17 09:47:33">2024/10/17</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/3fdbf0f6.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="12-JUC进阶-从ReentrantLock到AQS源码详解">12-JUC进阶-从ReentrantLock到AQS源码详解</span>
            <span class="post-date" title="2024-10-15 19:42:07">2024/10/15</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/3e0d7592.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="11-JUC进阶-Synchronized与锁升级">11-JUC进阶-Synchronized与锁升级</span>
            <span class="post-date" title="2024-10-06 09:28:00">2024/10/06</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/4502cffa.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="10-JUC进阶-Java对象内存布局和对象头">10-JUC进阶-Java对象内存布局和对象头</span>
            <span class="post-date" title="2024-10-04 09:54:40">2024/10/04</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/4de6a39b.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="09-JUC进阶-ThreadLocal">09-JUC进阶-ThreadLocal</span>
            <span class="post-date" title="2024-10-01 20:39:10">2024/10/01</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/72329cf5.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="08-JUC进阶-常用的原子操作类(18个)">08-JUC进阶-常用的原子操作类(18个)</span>
            <span class="post-date" title="2024-09-28 13:37:09">2024/09/28</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/5e3757c1.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="07-JUC进阶-CAS">07-JUC进阶-CAS</span>
            <span class="post-date" title="2024-09-26 19:37:00">2024/09/26</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/546d628d.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="06-JUC进阶-Volatile与Java内存模型">06-JUC进阶-Volatile与Java内存模型</span>
            <span class="post-date" title="2024-09-25 19:01:01">2024/09/25</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/1f2e0014.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="05-JUC进阶-Java内存模型-JMM">05-JUC进阶-Java内存模型-JMM</span>
            <span class="post-date" title="2024-09-23 23:01:07">2024/09/23</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/19653fb9.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="04-JUC进阶-LockSupport与线程中断">04-JUC进阶-LockSupport与线程中断</span>
            <span class="post-date" title="2024-09-23 20:51:50">2024/09/23</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/219e52ea.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="03-JUC进阶-Java中的锁的解析">03-JUC进阶-Java中的锁的解析</span>
            <span class="post-date" title="2024-09-21 14:15:20">2024/09/21</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/7e2d78eb.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="02-JUC进阶-CompletableFuture">02-JUC进阶-CompletableFuture</span>
            <span class="post-date" title="2024-09-18 22:50:00">2024/09/18</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/3d102971.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="01-JUC进阶-线程基础">01-JUC进阶-线程基础</span>
            <span class="post-date" title="2024-09-18 22:32:00">2024/09/18</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/37d56d14.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="11-CompletableFuture">11-CompletableFuture</span>
            <span class="post-date" title="2024-09-16 16:12:00">2024/09/16</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/31919959.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="10-Fork/Join">10-Fork/Join</span>
            <span class="post-date" title="2024-09-16 13:10:00">2024/09/16</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/a0197c15.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="09-ThreadPool-线程池">09-ThreadPool-线程池</span>
            <span class="post-date" title="2024-09-13 20:10:08">2024/09/13</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/a6760d1f.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="08-阻塞队列BlockingQueue">08-阻塞队列BlockingQueue</span>
            <span class="post-date" title="2024-09-07 17:30:00">2024/09/07</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/838e7581.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="07-JUC辅助类CountDownLatch、CyclicBarrier、Semaphore">07-JUC辅助类CountDownLatch、CyclicBarrier、Semaphore</span>
            <span class="post-date" title="2024-09-07 13:00:00">2024/09/07</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/f60e37c5.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="06-Callable &amp; Future 接口">06-Callable &amp; Future 接口</span>
            <span class="post-date" title="2024-09-06 22:10:00">2024/09/06</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/f184587f.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="05-公平锁和非公平锁，死锁，可重入锁">05-公平锁和非公平锁，死锁，可重入锁</span>
            <span class="post-date" title="2024-09-05 20:12:00">2024/09/05</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/9a09d992.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="04-集合的线程安全">04-集合的线程安全</span>
            <span class="post-date" title="2024-09-04 21:09:05">2024/09/04</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/bd2134da.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="03-线程间通信">03-线程间通信</span>
            <span class="post-date" title="2024-09-04 20:06:00">2024/09/04</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/850dac3c.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="02-Lock接口">02-Lock接口</span>
            <span class="post-date" title="2024-08-30 19:27:00">2024/08/30</span>
        </a>
        
        
        <a  class="全部文章 JUC "
           href="/blog/4e6bd685.html"
           data-tag="java,juc"
           data-author="" >
            <span class="post-title" title="01-多线程的基本概念">01-多线程的基本概念</span>
            <span class="post-date" title="2024-08-30 19:03:01">2024/08/30</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/1b0522f4.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第二十五章-分析GC日志">第二十五章-分析GC日志</span>
            <span class="post-date" title="2024-08-28 21:36:08">2024/08/28</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/944806143.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第二十四章-JVM运行时参数">第二十四章-JVM运行时参数</span>
            <span class="post-date" title="2024-08-27 18:30:10">2024/08/27</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/490498600.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第二十三章-使用OQL语言查询对象信息">第二十三章-使用OQL语言查询对象信息</span>
            <span class="post-date" title="2024-08-24 15:02:10">2024/08/24</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/1471620196.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第二十三章-浅堆-深堆-内存泄漏">第二十三章-浅堆-深堆-内存泄漏</span>
            <span class="post-date" title="2024-08-24 13:04:37">2024/08/24</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/971417975.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第二十三章-JVM监控及诊断工具-GUI篇">第二十三章-JVM监控及诊断工具-GUI篇</span>
            <span class="post-date" title="2024-08-16 21:00:00">2024/08/16</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/2165702380.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第二十二章-JVM监控及诊断工具-命令行篇">第二十二章-JVM监控及诊断工具-命令行篇</span>
            <span class="post-date" title="2024-08-12 19:36:32">2024/08/12</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/2681163762.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第二十一章-性能监控与调优概述">第二十一章-性能监控与调优概述</span>
            <span class="post-date" title="2024-08-12 19:13:06">2024/08/12</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/3537043756.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第二十章-再谈类的加载器">第二十章-再谈类的加载器</span>
            <span class="post-date" title="2024-08-10 13:43:10">2024/08/10</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/3387211378.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第十九章-类的加载过程详解">第十九章-类的加载过程详解</span>
            <span class="post-date" title="2024-08-02 19:33:27">2024/08/02</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/1107503247.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第十八章-字节码指令集与解析指令">第十八章-字节码指令集与解析指令</span>
            <span class="post-date" title="2024-08-01 01:40:02">2024/08/01</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/2772873157.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第十七章-使用javap指令解析class文件">第十七章-使用javap指令解析class文件</span>
            <span class="post-date" title="2024-07-22 23:54:00">2024/07/22</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/143162370.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第十六章-Class文件结构">第十六章-Class文件结构</span>
            <span class="post-date" title="2024-07-15 19:54:50">2024/07/15</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/309245330.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第十五章-GC日志分析">第十五章-GC日志分析</span>
            <span class="post-date" title="2024-07-13 08:34:00">2024/07/13</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/1750792302.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第十四章-垃圾收集器">第十四章-垃圾收集器</span>
            <span class="post-date" title="2024-07-10 19:27:00">2024/07/10</span>
        </a>
        
        
        <a  class="全部文章 算法 "
           href="/blog/484946532.html"
           data-tag="算法,合并有序链表"
           data-author="" >
            <span class="post-title" title="合并两个有序链表">合并两个有序链表</span>
            <span class="post-date" title="2024-07-06 09:11:00">2024/07/06</span>
        </a>
        
        
        <a  class="全部文章 算法 "
           href="/blog/2929260443.html"
           data-tag="算法,链表"
           data-author="" >
            <span class="post-title" title="链表反转">链表反转</span>
            <span class="post-date" title="2024-07-05 19:45:45">2024/07/05</span>
        </a>
        
        
        <a  class="全部文章 算法 "
           href="/blog/1403776474.html"
           data-tag="算法,选择排序,冒泡排序,插入排序"
           data-author="" >
            <span class="post-title" title="选择-冒泡-插入排序">选择-冒泡-插入排序</span>
            <span class="post-date" title="2024-07-03 11:02:16">2024/07/03</span>
        </a>
        
        
        <a  class="全部文章 算法 "
           href="/blog/2561891005.html"
           data-tag="算法,二分法"
           data-author="" >
            <span class="post-title" title="二分搜索">二分搜索</span>
            <span class="post-date" title="2024-06-29 10:04:10">2024/06/29</span>
        </a>
        
        
        <a  class="全部文章 算法 "
           href="/blog/2224151177.html"
           data-tag="算法,二进制,位运算"
           data-author="" >
            <span class="post-title" title="二进制和位运算">二进制和位运算</span>
            <span class="post-date" title="2024-06-20 08:04:00">2024/06/20</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/2105268063.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第十三章-垃圾回收相关概念">第十三章-垃圾回收相关概念</span>
            <span class="post-date" title="2024-01-14 14:27:00">2024/01/14</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/364508352.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第十二章-垃圾回收概述和相关算法">第十二章-垃圾回收概述和相关算法</span>
            <span class="post-date" title="2024-01-06 16:28:00">2024/01/06</span>
        </a>
        
        
        <a  class="全部文章 linux "
           href="/blog/2050535563.html"
           data-tag="linux,jenkins"
           data-author="" >
            <span class="post-title" title="Jenkins的安装和搭建自动化部署平台">Jenkins的安装和搭建自动化部署平台</span>
            <span class="post-date" title="2024-01-05 16:00:00">2024/01/05</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/2388209687.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第十一章-StringTable(字符串常量池)">第十一章-StringTable(字符串常量池)</span>
            <span class="post-date" title="2023-12-25 17:27:06">2023/12/25</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/3385856233.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第十章-执行引擎">第十章-执行引擎</span>
            <span class="post-date" title="2023-12-23 20:03:00">2023/12/23</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/4075763684.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第九章-对象的实例化内存布局与访问定位">第九章-对象的实例化内存布局与访问定位</span>
            <span class="post-date" title="2023-12-21 11:50:00">2023/12/21</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/3720767522.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第八章-直接内存">第八章-直接内存</span>
            <span class="post-date" title="2023-12-20 17:03:00">2023/12/20</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/105864584.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第七章-方法区">第七章-方法区</span>
            <span class="post-date" title="2023-12-14 18:24:00">2023/12/14</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/543408063.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第六章-JVM堆">第六章-JVM堆</span>
            <span class="post-date" title="2023-12-02 08:01:00">2023/12/02</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/554039338.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第五章-本地方法接口">第五章-本地方法接口</span>
            <span class="post-date" title="2023-11-30 17:55:00">2023/11/30</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/1123461525.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第四章-虚拟机栈">第四章-虚拟机栈</span>
            <span class="post-date" title="2023-11-28 20:55:00">2023/11/28</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/1626061462.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第三章-运行时数据区">第三章-运行时数据区</span>
            <span class="post-date" title="2023-11-28 19:31:00">2023/11/28</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/222077543.html"
           data-tag="java,jvm,双亲委派机制"
           data-author="" >
            <span class="post-title" title="第二章-JVM类加载子系统">第二章-JVM类加载子系统</span>
            <span class="post-date" title="2023-11-25 14:35:00">2023/11/25</span>
        </a>
        
        
        <a  class="全部文章 JVM "
           href="/blog/1897413233.html"
           data-tag="java,jvm"
           data-author="" >
            <span class="post-title" title="第一章-JVM和Java体系结构">第一章-JVM和Java体系结构</span>
            <span class="post-date" title="2023-11-25 10:00:00">2023/11/25</span>
        </a>
        
        
        <a  class="全部文章 Hexo "
           href="/blog/4179015178.html"
           data-tag="hexo,github pages,sitemap"
           data-author="" >
            <span class="post-title" title="给博客网站添加站点地图-sitemap">给博客网站添加站点地图-sitemap</span>
            <span class="post-date" title="2023-11-21 20:00:00">2023/11/21</span>
        </a>
        
        
        <a  class="全部文章 Hexo Typora "
           href="/blog/877664098.html"
           data-tag="hexo,typora,github"
           data-author="" >
            <span class="post-title" title="Typora设置图片自动上传Github">Typora设置图片自动上传Github</span>
            <span class="post-date" title="2023-11-20 20:30:00">2023/11/20</span>
        </a>
        
        
        <a  class="全部文章 Hexo "
           href="/blog/3069199997.html"
           data-tag="hexo,github pages"
           data-author="" >
            <span class="post-title" title="Hexo主题常用配置">Hexo主题常用配置</span>
            <span class="post-date" title="2023-11-20 00:00:01">2023/11/20</span>
        </a>
        
        
        <a  class="全部文章 Hexo "
           href="/blog/2016918085.html"
           data-tag="hexo,github pages"
           data-author="" >
            <span class="post-title" title="Hexo博客安装主题">Hexo博客安装主题</span>
            <span class="post-date" title="2023-11-20 00:00:01">2023/11/20</span>
        </a>
        
        
        <a  class="全部文章 Hexo "
           href="/blog/3070587776.html"
           data-tag="hexo,github pages"
           data-author="" >
            <span class="post-title" title="基于Hexo和Github Pages搭建个人博客">基于Hexo和Github Pages搭建个人博客</span>
            <span class="post-date" title="2023-11-18 15:40:20">2023/11/18</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-k8s/021-K8S-安全参数" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">021-K8S-安全参数</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="k8s">k8s</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color1">linux</a>
            
            <a class="color2">Docker</a>
            
            <a class="color1">Rocky</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2025-09-06 16:19:42'>2025-08-23 14:43</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:9.7k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E9%85%8D%E7%BD%AE%E5%AE%B9%E5%99%A8%E7%BA%A7%E5%88%AB%E7%9A%84%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6"><span class="toc-text">一、配置容器级别的安全控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%85%B1%E4%BA%AB%E4%B8%BB%E6%9C%BA%E7%BD%91%E7%BB%9C"><span class="toc-text">1. 共享主机网络</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%A1%88%E4%BE%8B"><span class="toc-text">1.1 案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-hostNetwork-%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">1.2 hostNetwork 使用注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%85%B1%E4%BA%AB%E4%B8%BB%E6%9C%BA%E7%AB%AF%E5%8F%A3"><span class="toc-text">2. 共享主机端口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E6%A1%88%E4%BE%8B"><span class="toc-text">2.1 案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-hostPort-%E4%B8%8E-NodePort-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">2.2 hostPort 与 NodePort 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">2.3 注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%85%B1%E4%BA%AB%E4%B8%BB%E6%9C%BAIPC%E5%92%8CPID"><span class="toc-text">3. 共享主机IPC和PID</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%A1%88%E4%BE%8B"><span class="toc-text">3.1 案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-Linux-Namespace-%E4%B8%AD%E7%9A%84-IPC-%E6%98%AF%E4%BB%80%E4%B9%88-%EF%BC%9F"><span class="toc-text">3.2 Linux Namespace 中的 IPC 是什么 ？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E9%85%8D%E7%BD%AEpod%E7%9A%84%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-text">二、配置pod的安全上下文</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8%E7%9A%84%E7%94%A8%E6%88%B7"><span class="toc-text">1. 指定运行容器的用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%98%BB%E6%AD%A2%E5%AE%B9%E5%99%A8%E4%BB%A5root%E7%94%A8%E6%88%B7%E8%BF%90%E8%A1%8C"><span class="toc-text">2. 阻止容器以root用户运行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%9D%9E-Root-%E8%BF%90%E8%A1%8C%E7%9A%84-Nginx-%E9%95%9C%E5%83%8F"><span class="toc-text">2.1 创建一个非 Root 运行的 Nginx 镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Pod-%E4%BB%A5%E9%9D%9E-root-%E7%94%A8%E6%88%B7%E8%BF%90%E8%A1%8C"><span class="toc-text">2.2 Pod 以非 root 用户运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E4%BD%BF%E7%94%A8%E7%89%B9%E6%9D%83%E6%A8%A1%E5%BC%8F%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8"><span class="toc-text">2.3 使用特权模式启动容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E4%B8%BA%E5%AE%B9%E5%99%A8-%E6%B7%BB%E5%8A%A0-%E7%A6%81%E7%94%A8-linux-%E5%86%85%E6%A0%B8%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-text">2.4 为容器 添加&#x2F;禁用 linux 内核的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E9%98%BB%E6%AD%A2%E5%AF%B9%E5%AE%B9%E5%99%A8%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%86%99%E5%85%A5"><span class="toc-text">2.5 阻止对容器根文件系统的写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E5%AE%B9%E5%99%A8%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E8%BF%90%E8%A1%8C%E6%97%B6%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8%E5%8D%B7"><span class="toc-text">2.6  容器使用不同用户运行时共享存储卷</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81Pod-Security-Admission"><span class="toc-text">三、Pod Security Admission</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-PodSecurityPolicy-%E6%A6%82%E5%BF%B5%EF%BC%88%E8%BF%87%E6%97%B6%EF%BC%89"><span class="toc-text">1. PodSecurityPolicy 概念（过时）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%85%B3%E4%BA%8E-Pod-Security-Admission"><span class="toc-text">2. 关于 Pod Security Admission</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Pod-Security-Standards-%E5%AE%9E%E6%96%BD%E6%96%B9%E6%B3%95"><span class="toc-text">3. Pod Security Standards 实施方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Pod-Security-Standards%E5%AE%9E%E6%96%BD%E6%BC%94%E7%A4%BA"><span class="toc-text">4. Pod Security Standards实施演示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-Baseline%E7%AD%96%E7%95%A5"><span class="toc-text">4.1 Baseline策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-Restricted%E7%AD%96%E7%95%A5"><span class="toc-text">4.2 Restricted策略</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81pod-security-admission%E5%BD%93%E5%89%8D%E5%B1%80%E9%99%90%E6%80%A7"><span class="toc-text">四、pod security admission当前局限性</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>集群环境</strong></p>
<table>
<thead>
<tr>
<th>IP</th>
<th>Hostname</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>10.20.1.139</td>
<td>k8s-master01</td>
<td>Master节点</td>
</tr>
<tr>
<td>10.20.1.140</td>
<td>k8s-node01</td>
<td>Node节点</td>
</tr>
<tr>
<td>10.20.1.141</td>
<td>k8s-node02</td>
<td>Node节点</td>
</tr>
<tr>
<td>10.20.1.142</td>
<td>k8s-node03</td>
<td>Node节点</td>
</tr>
</tbody></table>
<h1 id="一、配置容器级别的安全控制"><a href="#一、配置容器级别的安全控制" class="headerlink" title="一、配置容器级别的安全控制"></a>一、配置容器级别的安全控制</h1><h2 id="1-共享主机网络"><a href="#1-共享主机网络" class="headerlink" title="1. 共享主机网络"></a>1. 共享主机网络</h2><p>通常情况下，Pod中的容器会使用 Kubernetes 网络插件提供的网络，这些插件确保了 Pod 之间的网络通信。然而，有时候可能需要 Pod 直接使用主机（节点）的网络，直接使用主机的IP地址和端口，可以通过在 Pod 的配置中设置 <code>hostNetwork: true</code> 来实现。</p>
<p>直接使用主机网络可以减少网络转发的开销，提高网络性能，但同时也需要注意Pod直接使用主机端口可能会存在部分冲突。</p>
<h3 id="1-1-案例"><a href="#1-1-案例" class="headerlink" title="1.1 案例"></a>1.1 案例</h3><p>资源清单：<code>host-network.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">name:</span> <span class="string">nginx</span>
<span class="attr">spec:</span>
  <span class="attr">replicas:</span> <span class="number">1</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">nginx</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">nginx</span>
    <span class="attr">spec:</span>
      <span class="attr">nodeName:</span> <span class="string">k8s-master01</span> <span class="comment"># 选择 Pod 运行的节点的名字</span>
      <span class="attr">hostNetwork:</span> <span class="literal">true</span> <span class="comment"># 主机共享网络</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span>
          <span class="attr">image:</span> <span class="string">nginx:1.29.0</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="attr">ports:</span>
            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></code></pre>



<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单</span>
$ kubectl apply -f host-network.yaml

<span class="comment"># 查看Pod详情</span>
$ kubectl get pods -o wide
NAME                     READY   STATUS    RESTARTS   AGE   IP            NODE           NOMINATED NODE   READINESS GATES
nginx-76985c7d59-pzlpk   1/1     Running   0          11s   10.20.1.139   k8s-master01   &lt;none&gt;           &lt;none&gt;

<span class="comment"># 使用物理机IP访问Nginx</span>
$ curl http://10.20.1.139:80
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;<span class="built_in">head</span>&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>



<h3 id="1-2-hostNetwork-使用注意事项"><a href="#1-2-hostNetwork-使用注意事项" class="headerlink" title="1.2 hostNetwork 使用注意事项"></a>1.2 hostNetwork 使用注意事项</h3><p>Pod 直接使用主机的网络会占用宿主机的端口，Pod 的 IP 就是宿主机的 IP，使用时需要考虑是否与主机上的端口冲突，因此一般情况下除非某个特定应用必须占用宿主机上的特定端口，否则不建议使用主机网络。</p>
<p>由于Pod使用主机网络，访问Pod需要直接通过节点端口，因此要 <strong>注意放通节点安全组端口</strong> ，否则会出现访问不通的情况。</p>
<p>另外由于占用主机端口，使用 Deployment 部署 hostNetwork 类型 Pod 时，要注意 <strong>Pod的副本数不要超过节点数量</strong> ，否则会导致一个节点上调度了多个Pod，Pod 启动时端口冲突无法创建。例如上面例子中的 nginx，如果服务数为 2，并部署在只有1个节点的集群上，就会有一个Pod无法创建，查询Pod日志会发现是由于端口占用导致 nginx 无法启动。</p>
<p><strong>请避免在同一个节点上调度多个使用主机网络的 Pod，否则在创建 ClusterIP 类型的 Service 访问 Pod 时，会出现访问 ClusterIP 不通的情况。</strong></p>
<h2 id="2-共享主机端口"><a href="#2-共享主机端口" class="headerlink" title="2. 共享主机端口"></a>2. 共享主机端口</h2><p>在 Kubernetes 中，hostPort 是一种用于将主机上的特定端口映射到运行在 Pod 内部容器的端口的配置选项。通过使用 hostPort，你可以在主机上暴露容器的服务，从而允许外部网络通过主机的 IP 地址和指定的端口访问容器内的应用程序。</p>
<h3 id="2-1-案例"><a href="#2-1-案例" class="headerlink" title="2.1 案例"></a>2.1 案例</h3><p>资源清单：<code>host-port.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">name:</span> <span class="string">nginx</span>
<span class="attr">spec:</span>
  <span class="attr">replicas:</span> <span class="number">1</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">nginx</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">nginx</span>
    <span class="attr">spec:</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span>
          <span class="attr">image:</span> <span class="string">nginx:1.29.0</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="attr">ports:</span>
            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span>
              <span class="attr">hostPort:</span> <span class="number">8080</span> <span class="comment"># 主机端口</span>
              <span class="attr">protocol:</span> <span class="string">TCP</span></code></pre>



<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单，创建Pod</span>
$ kubectl apply -f host-port.yaml 
deployment.apps/nginx created

<span class="comment"># 查看Pod运行情况</span>
$ kubectl get pods -o wide
NAME                    READY   STATUS    RESTARTS   AGE   IP              NODE         NOMINATED NODE   READINESS GATES
nginx-585b8dd6d-9tzl6   1/1     Running   0          8s    171.20.85.209   k8s-node01   &lt;none&gt;           &lt;none&gt;

<span class="comment"># 通过Pod运行节点的物理机IP和映射端口 8080 访问Nginx</span>
$ curl 10.20.1.140:8080
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>





<h3 id="2-2-hostPort-与-NodePort-的区别"><a href="#2-2-hostPort-与-NodePort-的区别" class="headerlink" title="2.2 hostPort 与 NodePort 的区别"></a>2.2 hostPort 与 NodePort 的区别</h3><p>hostPort 与 NodePort 的区别是，NodePort 服务默认是把请求转发到随机的一个运行的 Pod 上，而 hostPort 是直接转发到本 Node 上的指定 Pod。</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>nodePort（Service）</th>
<th>hostPort（Pod）</th>
</tr>
</thead>
<tbody><tr>
<td>作用范围</td>
<td>集群所有节点</td>
<td>单个Pod所在节点</td>
</tr>
<tr>
<td>端口范围</td>
<td>默认30000-32767（可配置）</td>
<td>任意可用端口</td>
</tr>
<tr>
<td>安全性</td>
<td>推荐生产环境使用</td>
<td>存在端口冲突风险</td>
</tr>
<tr>
<td>负载均衡</td>
<td>自动负载均衡</td>
<td>需手动实现负载均衡</td>
</tr>
</tbody></table>
<h3 id="2-3-注意事项"><a href="#2-3-注意事项" class="headerlink" title="2.3 注意事项"></a>2.3 注意事项</h3><p>一个 Node 只能启动一个 hostPort，所以最初是用于把守护进程集（DaemonSets）部署到每个 Node (确保一个 Node 只有一个 hostPort )。如下图所示，3个 Node 上部署4个带 hostPort 的 Pod，会有一个不成功。</p>
<p><img src="https://raw.githubusercontent.com/GeorgeChan95/blogimg/master/img/2025/08/23/20250823-162900.png" alt="每个Node节点只能运行一个 hostPort"></p>
<p>即便是3个 Node 上部署3个带 hostPort 的 Pod 滚动升级时也会有问题，所以使用 hostPort 的服务在升级的时候一定要保障先停掉旧版本的 Pod 实例再启动新版本的 Pod 实例。</p>
<h2 id="3-共享主机IPC和PID"><a href="#3-共享主机IPC和PID" class="headerlink" title="3. 共享主机IPC和PID"></a>3. 共享主机IPC和PID</h2><ul>
<li><p>PID</p>
<ul>
<li><p>当 Pod 的 hostPID 设置为 true 时，Pod 内的容器将与宿主机共享相同的 PID 命名空间。这意味着容器可以看到宿主机上运行的所有进程（通过 ps 命令等），并且可以与宿主机的进程进行交互（例如发送信号）。</p>
</li>
<li><p>使用场景：常用于需要监控或管理宿主机进程的场景，例如运行监控代理或安全工具。</p>
</li>
</ul>
</li>
<li><p>IPC</p>
<ul>
<li>当 Pod 的 hostIPC 设置为 true 时，Pod 内的容器将与宿主机共享相同的 IPC（进程间通信）命名空间，允许容器使用宿主机的 IPC 机制。这意味着容器内的进程可以直接访问宿主机的 IPC 资源（例如宿主机的共享内存、消息队列等），也可以与宿主机上的进程或其他共享同一 IPC 命名空间的容器进程进行通信。</li>
</ul>
</li>
</ul>
<h3 id="3-1-案例"><a href="#3-1-案例" class="headerlink" title="3.1 案例"></a>3.1 案例</h3><p>资源清单：<code>host-ipc-pid.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">name:</span> <span class="string">nginx-ipc-pid</span>
<span class="attr">spec:</span>
  <span class="attr">replicas:</span> <span class="number">1</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">nginx-ipc-pid</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">nginx-ipc-pid</span>
    <span class="attr">spec:</span>
      <span class="attr">hostIPC:</span> <span class="literal">true</span> <span class="comment"># 主机共享 IPC 命名空间</span>
      <span class="attr">hostPID:</span> <span class="literal">true</span> <span class="comment"># 主机共享 PID 命名空间</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span>
          <span class="attr">image:</span> <span class="string">nginx:1.29.0</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></code></pre>



<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单，创建Deployment</span>
$ kubectl apply -f host-ipc-pid.yaml

<span class="comment"># 查看Pod运行详情</span>
$ kubectl get pods -o wide
NAME                            READY   STATUS    RESTARTS   AGE   IP              NODE         NOMINATED NODE   READINESS GATES
nginx-ipc-pid-d9f877dbd-hq2vp   1/1     Running   0          14s   171.20.85.210   k8s-node01   &lt;none&gt;           &lt;none&gt;

<span class="comment"># 进入容器</span>
$ kubectl <span class="built_in">exec</span> -it nginx-ipc-pid-d9f877dbd-hq2vp -- /bin/bash

<span class="comment"># 在容器内查看进程，可以看到，把系统进程也一并打印出来了</span>
root@nginx-ipc-pid-d9f877dbd-hq2vp:/<span class="comment"># ls -l /proc/</span>
total 0
drwxrwxrwt  2 root  root    40 Sep  6 02:19 acpi
-r--r--r--  1 root  root     0 Sep  6 02:38 bootconfig
-r--r--r--  1 root  root     0 Sep  6 02:38 buddyinfo
dr-xr-xr-x  4 root  root     0 Sep  6 02:19 bus
-r--r--r--  1 root  root     0 Sep  6 02:38 cgroups
-r--r--r--  1 root  root     0 Sep  6 02:38 cmdline
-r--r--r--  1 root  root     0 Sep  6 02:38 consoles
-r--r--r--  1 root  root     0 Sep  6 02:38 cpuinfo
-r--r--r--  1 root  root     0 Sep  6 02:38 crypto
-r--r--r--  1 root  root     0 Sep  6 02:38 devices
-r--r--r--  1 root  root     0 Sep  6 02:38 diskstats
-r--r--r--  1 root  root     0 Sep  6 02:38 dma
dr-xr-xr-x  4 root  root     0 Sep  6 02:38 driver
dr-xr-xr-x  3 root  root     0 Sep  6 02:38 dynamic_debug
-r--r--r--  1 root  root     0 Sep  6 02:38 execdomains
-r--r--r--  1 root  root     0 Sep  6 02:38 fb
-r--r--r--  1 root  root     0 Sep  6 02:19 filesystems
dr-xr-xr-x  4 root  root     0 Sep  6 02:19 fs
-r--r--r--  1 root  root     0 Sep  6 02:38 interrupts
-r--r--r--  1 root  root     0 Sep  6 02:38 iomem
-r--r--r--  1 root  root     0 Sep  6 02:38 ioports
dr-xr-xr-x 35 root  root     0 Sep  6 02:19 irq
-r--r--r--  1 root  root     0 Sep  6 02:38 kallsyms
crw-rw-rw-  1 root  root  1, 3 Sep  6 02:19 kcore
-r--r--r--  1 root  root     0 Sep  6 02:38 key-users
crw-rw-rw-  1 root  root  1, 3 Sep  6 02:19 keys
-r--------  1 root  root     0 Sep  6 02:38 kmsg
-r--------  1 root  root     0 Sep  6 02:38 kpagecgroup
-r--------  1 root  root     0 Sep  6 02:38 kpagecount
-r--------  1 root  root     0 Sep  6 02:38 kpageflags
-r--r--r--  1 root  root     0 Sep  6 02:38 loadavg
-r--r--r--  1 root  root     0 Sep  6 02:38 locks
-r--r--r--  1 root  root     0 Sep  6 02:38 mdstat
-r--r--r--  1 root  root     0 Sep  6 02:38 meminfo
-r--r--r--  1 root  root     0 Sep  6 02:38 misc
-r--r--r--  1 root  root     0 Sep  6 02:38 modules
lrwxrwxrwx  1 root  root    11 Sep  6 02:38 mounts -&gt; self/mounts
-rw-r--r--  1 root  root     0 Sep  6 02:38 mtrr
lrwxrwxrwx  1 root  root     8 Sep  6 02:19 net -&gt; self/net
-r--------  1 root  root     0 Sep  6 02:38 pagetypeinfo
-r--r--r--  1 root  root     0 Sep  6 02:38 partitions
-r--r--r--  1 root  root     0 Sep  6 02:38 schedstat
drwxrwxrwt  2 root  root    40 Sep  6 02:19 scsi
lrwxrwxrwx  1 root  root     0 Sep  6 02:19 self -&gt; 3214631
-r--------  1 root  root     0 Sep  6 02:38 slabinfo
-r--r--r--  1 root  root     0 Sep  6 02:38 softirqs
-r--r--r--  1 root  root     0 Sep  6 02:38 <span class="built_in">stat</span>
-r--r--r--  1 root  root     0 Sep  6 02:38 swaps
dr-xr-xr-x  1 root  root     0 Sep  6 02:19 sys
--w-------  1 root  root     0 Sep  6 02:19 sysrq-trigger
dr-xr-xr-x  5 root  root     0 Sep  6 02:38 sysvipc
lrwxrwxrwx  1 root  root     0 Sep  6 02:19 thread-self -&gt; 3214631/task/3214631
crw-rw-rw-  1 root  root  1, 3 Sep  6 02:19 timer_list
dr-xr-xr-x  6 root  root     0 Sep  6 02:38 <span class="built_in">tty</span>
-r--r--r--  1 root  root     0 Sep  6 02:38 <span class="built_in">uptime</span>
-r--r--r--  1 root  root     0 Sep  6 02:38 version
-r--------  1 root  root     0 Sep  6 02:38 vmallocinfo
-r--r--r--  1 root  root     0 Sep  6 02:38 vmstat
-r--r--r--  1 root  root     0 Sep  6 02:38 zoneinfo</code></pre>



<h3 id="3-2-Linux-Namespace-中的-IPC-是什么-？"><a href="#3-2-Linux-Namespace-中的-IPC-是什么-？" class="headerlink" title="3.2 Linux Namespace 中的 IPC 是什么 ？"></a>3.2 Linux Namespace 中的 IPC 是什么 ？</h3><ul>
<li>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/Skybiubiu/p/17315019.html">https://www.cnblogs.com/Skybiubiu/p/17315019.html</a></li>
</ul>
<p>IPC (Inter-Process Communication) Namespace 是 Linux 容器隔离的一种命名空间，用于隔离进程间通信（IPC）资源，包括 System V IPC 和 POSIX IPC。</p>
<p>在 Linux 中，进程间通信机制可以使用不同的 IPC 方法。这些方法包括管道、套接字、消息队列、信号量和共享内存等。这些 IPC 机制可以在系统全局范围内使用，也可以在特定的命名空间内使用。</p>
<p>当一个容器启动时，如果该容器运行在它自己的 IPC Namespace 中，那么将为该容器分配一个独立的 IPC 句柄。这意味着该容器内部的进程和外部的进程将无法相互通信。</p>
<p>IPC Namespace 具有以下两个主要特性：</p>
<ul>
<li>隔离：IPC Namespace 可以将特定容器中的进程隔离并限制进程之间在 IPC 资源上的共享。这样就可以避免其他容器或主机干扰到该容器中的进程，或者该容器中的进程干扰到其他容器或主机。</li>
<li>共享：如果多个容器运行在同一个 IPC Namespace 中，它们将共享容器之间的 IPC 资源，这使得在同一 IPC Namespace 中的容器之间通信变得更加容易和高效。</li>
</ul>
<p>总的来说，IPC Namespace 可以有效地保护容器内的进程，避免不必要的干扰。同时，在多个容器需要通信时，将它们加入同一个 IPC Namespace 可以更好地共享资源，从而实现更好的协作和协同工作。</p>
<h1 id="二、配置pod的安全上下文"><a href="#二、配置pod的安全上下文" class="headerlink" title="二、配置pod的安全上下文"></a>二、配置pod的安全上下文</h1><p>针对于container级别的控制</p>
<h2 id="1-指定运行容器的用户"><a href="#1-指定运行容器的用户" class="headerlink" title="1. 指定运行容器的用户"></a>1. 指定运行容器的用户</h2><p>资源清单：<code>user-id-pod.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">name:</span> <span class="string">alpine-user-id</span>
<span class="attr">spec:</span>
  <span class="attr">replicas:</span> <span class="number">1</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">alpine-user-id</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">alpine-user-id</span>
    <span class="attr">spec:</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">alpine</span>
          <span class="attr">image:</span> <span class="string">alpine:3.22.1</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="attr">command:</span>  <span class="comment"># 容器启动命令</span>
            <span class="bullet">-</span> <span class="string">/bin/sleep</span>
            <span class="bullet">-</span> <span class="string">&quot;3600&quot;</span>
          <span class="attr">securityContext:</span>
            <span class="attr">runAsUser:</span> <span class="number">405</span> <span class="comment"># 运行用户 ID</span></code></pre>



<p><strong>运行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单</span>
$ kubectl apply -f user-id-pod.yaml

<span class="comment"># 查看Pod</span>
$ kubectl get pods
NAME                              READY   STATUS    RESTARTS   AGE
alpine-user-id-687f8f598b-dcj8f   1/1     Running   0          5m15s

<span class="comment"># 进入容器，查看当前用户ID</span>
$ kubectl <span class="built_in">exec</span> -it alpine-user-id-687f8f598b-dcj8f -- /bin/sh
/ $ <span class="built_in">id</span>
uid=405(guest) gid=100(<span class="built_in">users</span>) <span class="built_in">groups</span>=100(<span class="built_in">users</span>)</code></pre>





<h2 id="2-阻止容器以root用户运行"><a href="#2-阻止容器以root用户运行" class="headerlink" title="2. 阻止容器以root用户运行"></a>2. 阻止容器以root用户运行</h2><p>有的应用在容器中设置了运行用户，然后可能会有黑客上传一个以root用户运行的镜像到我们的镜像仓库。然后在容器中利用root用户<br>的权限，这样是很危险的，所以我们可以禁用容器中的root用户，让他不能以root用户启动容器</p>
<h3 id="2-1-创建一个非-Root-运行的-Nginx-镜像"><a href="#2-1-创建一个非-Root-运行的-Nginx-镜像" class="headerlink" title="2.1 创建一个非 Root 运行的 Nginx 镜像"></a>2.1 创建一个非 Root 运行的 Nginx 镜像</h3><p><strong>Dockerfile</strong></p>
<pre><code class="highlight dockerfile"><span class="keyword">FROM</span> nginx:<span class="number">1.29</span>.<span class="number">0</span>
  
<span class="comment"># 修改 Nginx 配置：移除 &#x27;user&#x27; 指令（避免权限警告），并将默认监听端口改为 8080</span>
<span class="keyword">RUN</span><span class="language-bash"> sed -i <span class="string">&#x27;/^user /d&#x27;</span> /etc/nginx/nginx.conf &amp;&amp; \</span>
<span class="language-bash">    sed -i <span class="string">&#x27;s/listen       80;/listen       8080;/&#x27;</span> /etc/nginx/conf.d/default.conf</span>

<span class="comment"># 创建必要的临时目录和 PID 文件，并调整权限给 nginx 用户</span>
<span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /var/cache/nginx/client_temp /var/cache/nginx/proxy_temp /var/cache/nginx/fastcgi_temp /var/cache/nginx/uwsgi_temp /var/cache/nginx/scgi_temp &amp;&amp; \</span>
<span class="language-bash">    <span class="built_in">chown</span> -R nginx:nginx /var/cache/nginx /var/log/nginx /etc/nginx/conf.d /var/run &amp;&amp; \</span>
<span class="language-bash">    <span class="built_in">chmod</span> -R 755 /var/cache/nginx /var/log/nginx /etc/nginx/conf.d /var/run &amp;&amp; \</span>
<span class="language-bash">    <span class="built_in">touch</span> /var/run/nginx.pid &amp;&amp; \</span>
<span class="language-bash">    <span class="built_in">chown</span> -R nginx:nginx /var/run/nginx.pid</span>

<span class="comment"># 切换到非 root 用户（使用镜像内置的 nginx 用户）</span>
<span class="keyword">USER</span> nginx

<span class="comment"># 暴露端口（非特权端口）</span>
<span class="keyword">EXPOSE</span> <span class="number">8080</span>

<span class="comment"># 启动命令</span>
<span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;nginx&quot;</span>, <span class="string">&quot;-g&quot;</span>, <span class="string">&quot;daemon off;&quot;</span>]</span></code></pre>



<p><strong>构建镜像</strong></p>
<pre><code class="highlight bash">docker build -t nginx-nonroot:1.0 .</code></pre>



<p><strong>测试镜像</strong></p>
<pre><code class="highlight bash"><span class="comment"># 运行 nginx-nonroot 容器</span>
$ docker run -d -p 8080:8080 nginx-nonroot:1.0

<span class="comment"># 访问 nginx-nonroot</span>
$ curl http://localhost:8080
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;<span class="built_in">head</span>&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;

<span class="comment"># 查看当前nginx容器，启动命令的用户</span>
nginx@b094f1470b19:/$ <span class="built_in">id</span>
uid=101(nginx) gid=101(nginx) <span class="built_in">groups</span>=101(nginx)

<span class="comment"># 查看Nginx容器内的所有用户，可以看到 101 对应的就是用户 nginx，也是 Dockerfile 中指定的用户</span>
nginx@b094f1470b19:/$ <span class="built_in">cat</span> /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
<span class="built_in">sync</span>:x:4:65534:<span class="built_in">sync</span>:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
irc:x:39:39:ircd:/run/ircd:/usr/sbin/nologin
_apt:x:42:65534::/nonexistent:/usr/sbin/nologin
nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
nginx:x:101:101:nginx user:/nonexistent:/bin/false</code></pre>



<h3 id="2-2-Pod-以非-root-用户运行"><a href="#2-2-Pod-以非-root-用户运行" class="headerlink" title="2.2 Pod 以非 root 用户运行"></a>2.2 Pod 以非 root 用户运行</h3><p>资源清单：<code>non-root-pod.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">namespace:</span> <span class="string">default</span>
  <span class="attr">name:</span> <span class="string">non-root-pod</span>
<span class="attr">spec:</span>
  <span class="attr">replicas:</span> <span class="number">1</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">non-root-pod</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">non-root-pod</span>
    <span class="attr">spec:</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-nonroot</span>
          <span class="attr">image:</span> <span class="string">nginx-nonroot:1.0</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="attr">securityContext:</span>
            <span class="attr">runAsNonRoot:</span> <span class="literal">true</span> <span class="comment"># 以非root用户运行</span>
            <span class="attr">runAsUser:</span> <span class="number">101</span> <span class="comment"># 运行用户 ID, 以非root用户运行，最好指定运行的用户id</span></code></pre>



<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单，创建Pod</span>
$ kubectl apply -f non-root-pod.yaml

<span class="comment"># 查看Pod详情</span>
$ kubectl get pods -o wide
NAME                            READY   STATUS    RESTARTS   AGE   IP              NODE         NOMINATED NODE   READINESS GATES
non-root-pod-589bdf555b-c6925   1/1     Running   0          57s   171.20.85.214   k8s-node01   &lt;none&gt;           &lt;none&gt;

<span class="comment"># 进入Pod容器，查看当前容器运行的 User id</span>
$ kubectl <span class="built_in">exec</span> -it non-root-pod-589bdf555b-c6925 -- /bin/bash
nginx@non-root-pod-589bdf555b-c6925:/$ <span class="built_in">id</span>
uid=101(nginx) gid=101(nginx) <span class="built_in">groups</span>=101(nginx)</code></pre>



<h3 id="2-3-使用特权模式启动容器"><a href="#2-3-使用特权模式启动容器" class="headerlink" title="2.3 使用特权模式启动容器"></a>2.3 使用特权模式启动容器</h3><p>使得容器内的进程以 root 用户运行，并具有宿主机的几乎所有权限（如访问所有设备、挂载文件系统、修改内核参数等）。</p>
<p>容器内的 root 用户几乎等同于宿主机的 root，具有访问宿主机设备（&#x2F;dev）、文件系统、内核功能等的权限。</p>
<p>注意：privileged: true 仅影响容器，而非整个 Pod。如果 Pod 有多个容器，需要为每个需要特权的容器单独设置。</p>
<p><strong>资源清单：</strong> <code>privileged-pod.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">namespace:</span> <span class="string">default</span>
  <span class="attr">name:</span> <span class="string">privileged-pod</span>
<span class="attr">spec:</span>
  <span class="attr">replicas:</span> <span class="number">1</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">privileged-pod</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">privileged-pod</span>
    <span class="attr">spec:</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-privileged</span>
          <span class="attr">image:</span> <span class="string">nginx:1.29.0</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="attr">securityContext:</span>
            <span class="attr">privileged:</span> <span class="literal">true</span> <span class="comment"># 启用特权模式</span></code></pre>



<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单，创建Pod</span>
$ kubectl apply -f privileged-pod.yaml

<span class="comment"># 查看Pod详情</span>
$ kubectl get pods -o wide
NAME                              READY   STATUS    RESTARTS   AGE   IP              NODE         NOMINATED NODE   READINESS GATES
privileged-pod-86bdcd8565-lx5ff   1/1     Running   0          74s   171.20.85.216   k8s-node01   &lt;none&gt;           &lt;none&gt;

<span class="comment"># 进入Pod</span>
$ kubectl <span class="built_in">exec</span> -it privileged-pod-86bdcd8565-lx5ff -- /bin/bash

<span class="comment"># 查看运行容器的用户id</span>
root@privileged-pod-86bdcd8565-lx5ff:/<span class="comment"># id</span>
uid=0(root) gid=0(root) <span class="built_in">groups</span>=0(root)

<span class="comment"># 查看 /dev 目录，容器内可以查看到宿主机所有的挂载设备</span>
root@privileged-pod-86bdcd8565-lx5ff:/<span class="comment"># ls /dev</span>
autofs		 dm-1	   hidraw0	 mcelog  ppp	 sda1	   snd		    tty0   tty15  tty21  tty28	tty34  tty40  tty47  tty53  tty6   tty9     uinput	 vcs1  vcsa1  vcsu1  vga_arbiter
bsg		 dma_heap  hpet		 mem	 ptmx	 sda2	   sr0		    tty1   tty16  tty22  tty29	tty35  tty41  tty48  tty54  tty60  ttyS0    urandom	 vcs2  vcsa2  vcsu2  vhci
bus		 dri	   hwrng	 mqueue  pts	 sda3	   stderr	    tty10  tty17  tty23  tty3	tty36  tty42  tty49  tty55  tty61  ttyS1    usbmon0	 vcs3  vcsa3  vcsu3  vhost-net
core		 fb0	   input	 net	 random  sg0	   stdin	    tty11  tty18  tty24  tty30	tty37  tty43  tty5   tty56  tty62  ttyS2    usbmon1	 vcs4  vcsa4  vcsu4  vhost-vsock
cpu		 fd	   kmsg		 null	 rfkill  sg1	   stdout	    tty12  tty19  tty25  tty31	tty38  tty44  tty50  tty57  tty63  ttyS3    usbmon2	 vcs5  vcsa5  vcsu5  vmci
cpu_dma_latency  full	   loop-control  nvram	 rtc0	 shm	   termination-log  tty13  tty2   tty26  tty32	tty39  tty45  tty51  tty58  tty7   udmabuf  userfaultfd  vcs6  vcsa6  vcsu6  zero
dm-0		 fuse	   mapper	 port	 sda	 snapshot  <span class="built_in">tty</span>		    tty14  tty20  tty27  tty33	tty4   tty46  tty52  tty59  tty8   uhid     vcs		 vcsa  vcsu   vfio</code></pre>



<h3 id="2-4-为容器-添加-禁用-linux-内核的功能"><a href="#2-4-为容器-添加-禁用-linux-内核的功能" class="headerlink" title="2.4 为容器 添加&#x2F;禁用 linux 内核的功能"></a>2.4 为容器 添加&#x2F;禁用 linux 内核的功能</h3><p>使用特权模式启动的容器被赋予了过大的权限，我们可以根据需求给予容器所需的 linux 内核的能力。</p>
<p>在 Kubernetes 中，可以通过配置 Pod 的 securityContext 来为容器添加或禁用 Linux 内核功能（Capabilities）。Linux Capabilities 是 Linux 内核提供的一种机制，将 root 用户的权限细分为多个独立的功能，允许以更精细的方式控制容器进程的权限，而不是简单地以 root 或非 root 用户运行。这种方式可以增强安全性，遵循最小权限原则。</p>
<p><strong>什么是 Linux Capabilities</strong></p>
<p>Linux Capabilities 是 Linux 内核将特权操作拆分成多个独立权限的机制，例如：</p>
<ul>
<li>CAP_SYS_ADMIN：允许执行高权限操作（如挂载文件系统、修改系统配置）。</li>
<li>CAP_NET_ADMIN：允许配置网络（如修改网络接口、设置防火墙规则）。</li>
<li>CAP_SYS_PTRACE：允许跟踪其他进程（结合 hostPID: true 可用于调试宿主机进程）。</li>
<li>CAP_CHOWN：允许更改文件的所有者。</li>
<li>完整 Capabilities 列表见 <a target="_blank" rel="noopener" href="http://man7.org/linux/man-pages/man7/capabilities.7.html">Linux man page</a>。</li>
</ul>
<p>默认情况下：</p>
<ul>
<li>容器以非特权模式运行时，只有部分 Capabilities（例如 CAP_CHOWN、CAP_SETUID 等）。</li>
<li>特权模式（privileged: true）授予容器所有 Capabilities，等同于宿主机 root。</li>
<li>通过 securityContext.capabilities，可以显式添加（add）或禁用（drop）特定 Capabilities。</li>
</ul>
<p><strong>资源清单：</strong> <code>capabilities-pod.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">namespace:</span> <span class="string">default</span>
  <span class="attr">name:</span> <span class="string">capabilities-pod</span>
<span class="attr">spec:</span>
  <span class="attr">replicas:</span> <span class="number">1</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">capabilities-pod</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">capabilities-pod</span>
    <span class="attr">spec:</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-capabilities</span>
          <span class="attr">image:</span> <span class="string">nginx:1.29.0</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="attr">securityContext:</span>
            <span class="attr">privileged:</span> <span class="literal">false</span> <span class="comment"># 禁用特权模式</span>
            <span class="attr">capabilities:</span>
              <span class="attr">add:</span>
                <span class="bullet">-</span> <span class="string">NET_ADMIN</span> <span class="comment"># 添加网络管理能力</span>
                <span class="bullet">-</span> <span class="string">SYS_PTRACE</span> <span class="comment"># 添加跟踪进程的能力（适用于 hostPID: true）</span>
              <span class="attr">drop:</span>
<span class="comment">#                - CHOWN # 禁用更改文件所有者的能力（Nginx启动需要修改文件所有者，因此不能禁用）</span>
                <span class="bullet">-</span> <span class="string">SYS_ADMIN</span> <span class="comment"># 禁用高危的系统管理能力</span></code></pre>

<p>注意：在linux中内核功能通常以CAP_开头，这里需要省略掉</p>
<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单，创建Pod</span>
$ kubectl apply -f capabilities-pod.yaml

<span class="comment"># 查看Pod</span>
$ kubectl get pods -w
NAME                                READY   STATUS              RESTARTS   AGE
capabilities-pod-787896d744-p6ptf   0/1     ContainerCreating   0          12s
capabilities-pod-787896d744-p6ptf   1/1     Running             0          13s</code></pre>





<h3 id="2-5-阻止对容器根文件系统的写入"><a href="#2-5-阻止对容器根文件系统的写入" class="headerlink" title="2.5 阻止对容器根文件系统的写入"></a>2.5 阻止对容器根文件系统的写入</h3><p><strong>资源清单：</strong><code>read-only-root-filesystem-pod.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">namespace:</span> <span class="string">default</span>
  <span class="attr">name:</span> <span class="string">read-only-root-filesystem-pod</span>
<span class="attr">spec:</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">read-only-root-filesystem-pod</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">read-only-root-filesystem-pod</span>
    <span class="attr">spec:</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">alpine</span>
          <span class="attr">image:</span> <span class="string">alpine:3.22.1</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="attr">securityContext:</span>
            <span class="attr">readOnlyRootFilesystem:</span> <span class="literal">true</span> <span class="comment"># 只读根文件系统</span>
          <span class="attr">command:</span>  <span class="comment"># 容器启动命令</span>
            <span class="bullet">-</span> <span class="string">/bin/sleep</span>
            <span class="bullet">-</span> <span class="string">&quot;3600&quot;</span>
          <span class="attr">volumeMounts:</span>
            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">read-only-root-filesystem-pod</span> <span class="comment"># # 挂载了一个可写的 emptyDir 卷到 /volume 路径，允许容器写入数据</span>
              <span class="attr">mountPath:</span> <span class="string">/volume</span>
              <span class="attr">readOnly:</span> <span class="literal">false</span>
      <span class="attr">volumes:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">read-only-root-filesystem-pod</span> <span class="comment"># 定义一个 emptyDir 卷，是一种临时存储卷，卷在 Pod 创建时分配，初始为空，生命周期与 Pod 绑定（Pod 删除时卷被销毁）</span>
          <span class="attr">emptyDir:</span> &#123;&#125;</code></pre>



<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单，创建Pod</span>
$ kubectl apply -f read-only-root-filesystem-pod.yaml

<span class="comment"># 查看Pod</span>
$ kubectl get pods 
NAME                                             READY   STATUS    RESTARTS   AGE
read-only-root-filesystem-pod-77bc855c7f-t9nsh   1/1     Running   0          39s

<span class="comment"># 进入Pod容器</span>
$ kubectl <span class="built_in">exec</span> -it read-only-root-filesystem-pod-77bc855c7f-t9nsh -- /bin/sh

<span class="comment"># 在根路径下创建文件失败，因为 Pod 禁止了根路径下的文件写入</span>
/ <span class="comment"># touch a.txt</span>
<span class="built_in">touch</span>: a.txt: Read-only file system

<span class="comment"># 在挂载路径下创建文件</span>
/ <span class="comment"># touch /volume/a.txt</span></code></pre>



<p><strong>readOnlyRootFilesystem: true</strong></p>
<p><strong>作用</strong>：将容器根文件系统（&#x2F;, 包括 &#x2F;etc、&#x2F;usr 等）设为只读。</p>
<p><strong>详情</strong>：</p>
<ul>
<li>容器无法在根文件系统上写入文件（如修改 &#x2F;etc&#x2F;passwd 或创建 &#x2F;tmp&#x2F;testfile），增强安全性。</li>
<li>防止恶意或意外修改关键文件，降低容器被攻击的风险。</li>
<li>影响：<ul>
<li>某些应用（如需要写日志或缓存到根文件系统的）可能失败，除非提供可写路径（如通过卷）。</li>
<li>在 alpine 镜像中，&#x2F;bin&#x2F;sleep 不需要写根文件系统，因此运行正常。</li>
</ul>
</li>
<li><strong>注意</strong>：与之前的 nginx:1.29.0 配置不同，Nginx 默认需要写日志（&#x2F;var&#x2F;log&#x2F;nginx）和缓存（&#x2F;var&#x2F;cache&#x2F;nginx），启用 readOnlyRootFilesystem: true 可能导致 Nginx 失败，除非将这些路径挂载到可写卷。</li>
</ul>
<p>如果想将此配置应用于 nginx:1.29.0，需添加多个可写卷：</p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">v1</span>
<span class="attr">kind:</span> <span class="string">Pod</span>
<span class="attr">metadata:</span>
  <span class="attr">name:</span> <span class="string">nginx-readonly</span>
<span class="attr">spec:</span>
  <span class="attr">containers:</span>
  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span>
    <span class="attr">image:</span> <span class="string">nginx:1.29.0</span>
    <span class="attr">securityContext:</span>
      <span class="attr">readOnlyRootFilesystem:</span> <span class="literal">true</span>
    <span class="attr">volumeMounts:</span>
    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">log-volume</span>
      <span class="attr">mountPath:</span> <span class="string">/var/log/nginx</span>
      <span class="attr">readOnly:</span> <span class="literal">false</span>
    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">cache-volume</span>
      <span class="attr">mountPath:</span> <span class="string">/var/cache/nginx</span>
      <span class="attr">readOnly:</span> <span class="literal">false</span>
    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">run-volume</span>
      <span class="attr">mountPath:</span> <span class="string">/var/run</span>
      <span class="attr">readOnly:</span> <span class="literal">false</span>
  <span class="attr">volumes:</span>
  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">log-volume</span>
    <span class="attr">emptyDir:</span> &#123;&#125;
  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">cache-volume</span>
    <span class="attr">emptyDir:</span> &#123;&#125;
  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">run-volume</span>
    <span class="attr">emptyDir:</span> &#123;&#125;</code></pre>



<h3 id="2-6-容器使用不同用户运行时共享存储卷"><a href="#2-6-容器使用不同用户运行时共享存储卷" class="headerlink" title="2.6  容器使用不同用户运行时共享存储卷"></a>2.6  容器使用不同用户运行时共享存储卷</h3><p>当一个 pod 中的两个容器都使用 root 用户运行时，他们之前可以互相读取对方的挂载卷。但是，当我们为每个容器配置其他的启动用户时，<br>可以会出现一些访问权限的问题。<br>在 kubernetes 中，可以为 pod 中的容器指定一个 supplemental 组，以允许他们无论通过哪个用户启动容器都可以共享文件。</p>
<pre><code class="highlight yaml"><span class="attr">spec:</span>
  <span class="attr">securityContext:</span>
    <span class="comment"># 用户组id设置为555，则创建存储卷时存储卷属于用户ID为555的用户组</span>
    <span class="attr">fsGroup:</span> <span class="number">555</span>
    <span class="comment"># 定义了某个用户所关联的额外的用户组</span>
    <span class="attr">supplementalGroups:</span>
      <span class="bullet">-</span> <span class="number">666</span>
      <span class="bullet">-</span> <span class="number">777</span>
  <span class="attr">containers:</span>
    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">test-A</span>
      <span class="attr">image:</span> <span class="string">test-container</span>
      <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
      <span class="attr">securityContext:</span>
        <span class="attr">runAsUser:</span> <span class="number">01</span>
      <span class="attr">volumeMounts:</span>
        <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/volume</span>
          <span class="attr">name:</span> <span class="string">test-volume</span>
          <span class="attr">readOnly:</span> <span class="literal">false</span>
    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">test-B</span>
      <span class="attr">image:</span> <span class="string">test-container</span>
      <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
      <span class="attr">securityContext:</span>
        <span class="attr">runAsUser:</span> <span class="number">02</span>
      <span class="attr">volumeMounts:</span>
        <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/volume</span>
          <span class="attr">name:</span> <span class="string">test-volume</span>
          <span class="attr">readOnly:</span> <span class="literal">false</span>
  <span class="attr">volumes:</span>
    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">test-volume</span>
      <span class="attr">emptyDir:</span> &#123;&#125;</code></pre>

<p>在pod级别指定 fsGroup 与 supplementalGroups 属性，然后分别指定两个容器的启动用户为 01、02。然后在启动容器，在容器中执行<code>id</code>命令<br>可以查看容器的用户和用户组，然后就可以看到两个容器虽然用户不同，但是都属于“555、666、777”这三个组中。</p>
<h1 id="三、Pod-Security-Admission"><a href="#三、Pod-Security-Admission" class="headerlink" title="三、Pod Security Admission"></a>三、Pod Security Admission</h1><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="1-PodSecurityPolicy-概念（过时）"><a href="#1-PodSecurityPolicy-概念（过时）" class="headerlink" title="1. PodSecurityPolicy 概念（过时）"></a>1. PodSecurityPolicy 概念（过时）</h2><p>PodSecurityPolicy 在 kubernetes 中简称为 psp，主要定义了用户能否在 pod 中使用各种安全相关的特性。</p>
<p>当有人调用 api server创建pod时，PodSecurityPolicy 会拿到这个 pod 的信息与自己个规则做比较。如果符合规则，就运行其存入 etcd；否则会被拒绝。<br>因为是在创建 pod 时校验的，所以修改 psp，不会对已创建的 pod 采取措施。也可以设置默认值，就是用 psp 中配置的默认值替换掉 pod 中的值。</p>
<p>Pod Security Policy 是一个赋予集群管理员控制 Pod 安全规范的内置准入控制器，可以让管理人员控制Pod实例安全的诸多方面，例如禁止采用root权限、防止容器逃逸等等。Pod Security Policy 定义了一组 Pod 运行时必须遵循的条件及相关字段的默认值，Pod 必须满足这些条件才能被成功创建，Pod Security Policy 对象 Spec 包含以下字段也即是 Pod Security Policy 能够控制的方面：</p>
<table>
<thead>
<tr>
<th>控制的角度</th>
<th>字段名称</th>
</tr>
</thead>
<tbody><tr>
<td>运行特权容器</td>
<td>privileged</td>
</tr>
<tr>
<td>使用宿主名字空间</td>
<td>hostPID,hostIPC</td>
</tr>
<tr>
<td>使用宿主的网络和端口</td>
<td>hostNetwork, hostPorts</td>
</tr>
<tr>
<td>控制卷类型的使用</td>
<td>volumes</td>
</tr>
<tr>
<td>使用宿主文件系统</td>
<td>allowedHostPaths</td>
</tr>
<tr>
<td>允许使用特定的 FlexVolume 驱动</td>
<td>allowedFlexVolumes</td>
</tr>
<tr>
<td>分配拥有 Pod 卷的 FSGroup 账号</td>
<td>fsGroup</td>
</tr>
<tr>
<td>以只读方式访问根文件系统</td>
<td>readOnlyRootFilesystem</td>
</tr>
<tr>
<td>设置容器的用户和组 ID</td>
<td>runAsUser, runAsGroup, supplementalGroups</td>
</tr>
<tr>
<td>限制 root 账号特权级提升</td>
<td>allowPrivilegeEscalation, defaultAllowPrivilegeEscalation</td>
</tr>
<tr>
<td>Linux 功能（Capabilities）</td>
<td>defaultAddCapabilities, requiredDropCapabilities, allowedCapabilities</td>
</tr>
<tr>
<td>设置容器的 SELinux 上下文</td>
<td>seLinux</td>
</tr>
<tr>
<td>指定容器可以挂载的 proc 类型</td>
<td>allowedProcMountTypes</td>
</tr>
<tr>
<td>指定容器使用的 AppArmor 模版</td>
<td>annotations</td>
</tr>
<tr>
<td>指定容器使用的 seccomp 模版</td>
<td>annotations</td>
</tr>
<tr>
<td>指定容器使用的 sysctl 模版</td>
<td>forbiddenSysctls,allowedUnsafeSysctls</td>
</tr>
</tbody></table>
<p>其中AppArmor 和seccomp 需要通过给PodSecurityPolicy对象添加注解的方式设定：</p>
<pre><code class="highlight yaml"><span class="attr">seccomp.security.alpha.kubernetes.io/allowedProfileNames:</span> <span class="string">&#x27;docker/default&#x27;</span>
<span class="attr">seccomp.security.alpha.kubernetes.io/defaultProfileNames:</span> <span class="string">&#x27;docker/default&#x27;</span>
<span class="attr">apparmor.security.beta.kubernetes.io/allowedProfileNames:</span> <span class="string">&#x27;runtime/default&#x27;</span> 
<span class="attr">apparmor.security.beta.kubernetes.io/defaultProfileNames:</span> <span class="string">&#x27;runtime/default&#x27;</span></code></pre>



<p>Pod Security Policy是集群级别的资源，它的使用流程：</p>
<p><img src="https://img2022.cnblogs.com/blog/1669826/202204/1669826-20220406164525862-2082600217.png" alt="Pod Security Policy 使用流程"></p>
<p>由于需要创建 ClusterRole&#x2F;Role 和 ClusterRoleBinding&#x2F;RoleBinding 绑定服务账号来使用 PSP,这使得我们不能很容易的看出究竟使用了哪些 PSP,更难看出 Pod 的创建被哪些安全规则限制。</p>
<h2 id="2-关于-Pod-Security-Admission"><a href="#2-关于-Pod-Security-Admission" class="headerlink" title="2. 关于 Pod Security Admission"></a>2. 关于 Pod Security Admission</h2><p>通过对 PodSecurityPolicy 使用，应该也会发现它的问题，例如没有 dry-run 和审计模式、不方便开启和关闭等，并且使用起来也不那么清晰。种种缺陷造成的结果是 PodSecurityPolicy 在 Kubernetes v1.21 被标记为弃用，并且将在 v1.25中被移除，在 kubernets v1.22 中则增加了新特性 Pod Security Admission。</p>
<p>pod security admission 是 kubernetes 内置的一种准入控制器，在 kubernetes v1.23 版本中这一特性门是默认开启的，在v1.22中需要通过 kube-apiserver 参数 <code>--feature-gates=&quot;...,PodSecurity=true&quot;</code> 开启。在低于v1.22的 kuberntes 版本中也可以自行安装 Pod Security Admission Webhook。</p>
<p>Pod Security Admission 机制在易用性和灵活性上都有了很大提升，从使用角度有以下三点显著不同：</p>
<ul>
<li>可以在集群中默认开启，只要不设置约束条件就不会触发对 pod 的校验</li>
<li>只在命名空间级别生效，可以为不同命名空间通过添加标签的方式设置不同的安全限制</li>
<li>根据实践预设了三种安全等级，不需要由用户单独去设置每一项安全条件</li>
</ul>
<p>为了广泛的覆盖安全应用场景， Pod Security Standards渐进式的定义了三种不同的Pod安全标准策略：</p>
<table>
<thead>
<tr>
<th>Profile</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Privileged</strong></td>
<td>不受限制的策略，提供最大可能范围的权限许可。此策略允许已知的特权提升。</td>
</tr>
<tr>
<td><strong>Baseline</strong></td>
<td>限制性最弱的策略，禁止已知的策略提升。允许使用默认的（规定最少）Pod 配置。</td>
</tr>
<tr>
<td><strong>Restricted</strong></td>
<td>限制性非常强的策略，遵循当前的保护 Pod 的最佳实践。</td>
</tr>
</tbody></table>
<p>详细内容参见 <a target="_blank" rel="noopener" href="https://kubernetes.io/docs/concepts/security/pod-security-standards">Pod Security Standards</a>。</p>
<h2 id="3-Pod-Security-Standards-实施方法"><a href="#3-Pod-Security-Standards-实施方法" class="headerlink" title="3. Pod Security Standards 实施方法"></a>3. Pod Security Standards 实施方法</h2><p>在kubernetes集群中开启了pod security admission特性门之后，就可以通过给namespace设置label的方式来实施Pod Security Standards。其中有三种设定模式可选用：</p>
<table>
<thead>
<tr>
<th align="left">Mode</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>enforce</strong></td>
<td align="left">违反安全标准策略的 Pod 将被拒绝。</td>
</tr>
<tr>
<td align="left"><strong>audit</strong></td>
<td align="left">违反安全标准策略触发向审计日志中记录的事件添加审计注释，但其他行为被允许。</td>
</tr>
<tr>
<td align="left"><strong>warn</strong></td>
<td align="left">违反安全标准策略将触发面向用户的警告，但其他行为被允许。</td>
</tr>
</tbody></table>
<p>label设置模板解释：</p>
<pre><code class="highlight bash"><span class="comment"># 设定模式及安全标准策略等级</span>
<span class="comment"># MODE必须是 `enforce`, `audit`或`warn`其中之一。</span>
<span class="comment"># LEVEL必须是`privileged`, `baseline`或 `restricted`其中之一</span>
pod-security.kubernetes.io/&lt;MODE&gt;: &lt;LEVEL&gt;

<span class="comment"># 此选项是非必填的，用来锁定使用哪个版本的的安全标准</span>
<span class="comment"># MODE必须是 `enforce`, `audit`或`warn`其中之一。</span>
<span class="comment"># VERSION必须是一个有效的kubernetes minor version(例如v1.23)，或者 `latest`</span>
pod-security.kubernetes.io/&lt;MODE&gt;-version: &lt;VERSION&gt;</code></pre>

<p>一个 namesapce 可以设定任意种模式或者不同的模式设定不同的安全标准策略。</p>
<p>通过准入控制器配置文件，可以为pod security admission设置默认配置：</p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apiserver.config.k8s.io/v1</span>
<span class="attr">kind:</span> <span class="string">AdmissionConfiguration</span> <span class="comment"># 准入控制</span>
<span class="attr">plugins:</span>
<span class="bullet">-</span> <span class="attr">name:</span> <span class="string">PodSecurity</span>
  <span class="attr">configuration:</span>
    <span class="attr">apiVersion:</span> <span class="string">pod-security.admission.config.k8s.io/v1beta1</span>
    <span class="attr">kind:</span> <span class="string">PodSecurityConfiguration</span>
    <span class="comment"># Defaults applied when a mode label is not set.</span>
    <span class="comment">#</span>
    <span class="comment"># Level label values must be one of:</span>
    <span class="comment"># - &quot;privileged&quot; (default)</span>
    <span class="comment"># - &quot;baseline&quot;</span>
    <span class="comment"># - &quot;restricted&quot;</span>
    <span class="comment">#</span>
    <span class="comment"># Version label values must be one of:</span>
    <span class="comment"># - &quot;latest&quot; (default) </span>
    <span class="comment"># - specific version like &quot;v1.23&quot;</span>
    <span class="attr">defaults:</span> <span class="comment"># 默认执行最宽松的检验策略</span>
      <span class="attr">enforce:</span> <span class="string">&quot;privileged&quot;</span>
      <span class="attr">enforce-version:</span> <span class="string">&quot;latest&quot;</span> <span class="comment"># latest 表示使用最新的 PSS 版本（基于集群版本，例如 Kubernetes 1.25 可能是 v1.25）</span>
      <span class="attr">audit:</span> <span class="string">&quot;privileged&quot;</span>
      <span class="attr">audit-version:</span> <span class="string">&quot;latest&quot;</span>
      <span class="attr">warn:</span> <span class="string">&quot;privileged&quot;</span>
      <span class="attr">warn-version:</span> <span class="string">&quot;latest&quot;</span>
    <span class="attr">exemptions:</span>
      <span class="comment"># 指定免除检查的认证用户名，空数组表示没有用户豁免，所有用户创建的 Pod 都受策略约束。</span>
      <span class="attr">usernames:</span> []
      <span class="comment"># 指定免除检查的 RuntimeClass 名称。空数组表示没有 RuntimeClass 豁免，适用于所有运行时（如 containerd、CRI-O）</span>
      <span class="attr">runtimeClassNames:</span> []
      <span class="comment"># 指定免除检查的命名空间</span>
      <span class="attr">namespaces:</span> []</code></pre>

<p>pod security admission 可以从 username，runtimeClassName，namespace 三个维度对pod进行安全标准检查的豁免。</p>
<h2 id="4-Pod-Security-Standards实施演示"><a href="#4-Pod-Security-Standards实施演示" class="headerlink" title="4. Pod Security Standards实施演示"></a>4. Pod Security Standards实施演示</h2><ul>
<li>环境: kubernetes v1.29</li>
</ul>
<p>运行时的容器面临很多攻击风险，例如容器逃逸，从容器发起资源耗尽型攻击。</p>
<h3 id="4-1-Baseline策略"><a href="#4-1-Baseline策略" class="headerlink" title="4.1 Baseline策略"></a>4.1 Baseline策略</h3><p>Baseline策略目标是应用于常见的容器化应用，禁止已知的特权提升，在官方的介绍中此策略针对的是应用运维人员和非关键性应用开发人员，在该策略中包括：</p>
<p>必须禁止共享宿主机命名空间、禁止容器特权、 限制Linux能力、禁止hostPath卷、限制宿主机端口、设定AppArmor、SElinux、Seccomp、Sysctls等。</p>
<p><strong>下面演示设定Baseline策略。</strong></p>
<p>违反Baseline策略存在的风险：</p>
<ul>
<li>特权容器可以看到宿主机设备</li>
<li>挂载procfs后可以看到宿主机进程，打破进程隔离</li>
<li>可以打破网络隔离</li>
<li>挂载运行时socket后可以不受限制的与运行时通信</li>
</ul>
<p>等等以上风险都可能导致容器逃逸。</p>
<ol>
<li><p>创建名为my-baseline-namespace的namespace，并设定enforce和warn两种模式都对应Baseline等级的Pod安全标准策略：</p>
<p>资源清单：<code>my-baseline-namespace.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">v1</span> <span class="comment"># 命名空间的 API 版本（固定为 v1）</span>
<span class="attr">kind:</span> <span class="string">Namespace</span> <span class="comment"># 资源类型：命名空间（用于隔离集群资源）</span>
<span class="attr">metadata:</span>
  <span class="attr">name:</span> <span class="string">my-baseline-namespace</span> <span class="comment"># 命名空间名称，Pod 将在此命名空间内运行</span>
  <span class="attr">labels:</span> <span class="comment"># 核心：通过标签配置 Pod 安全策略（PSA 规则）</span>
    <span class="comment"># 强制实施 Baseline 级别的安全标准，所有在该命名空间创建的 Pod 必须符合此标准，否则会被拒绝创建。</span>
    <span class="comment"># Baseline 标准核心约束（Kubernetes 官方定义）：</span>
      <span class="comment"># - 禁止特权容器（privileged: true）。</span>
      <span class="comment"># - 禁止已知的特权升级路径（如 allowPrivilegeEscalation: true 且 runAsUser: 0）。</span>
      <span class="comment"># - 允许默认的（相对宽松的）Pod 配置（如允许使用主机网络 hostNetwork、主机 PID hostPID、主机 IPC hostIPC 等，这也是与更严格的 Restricted 级别的主要区别）</span>
    <span class="attr">pod-security.kubernetes.io/enforce:</span> <span class="string">baseline</span>
    <span class="comment"># 指定 enforce 规则所使用的 Kubernetes 版本（此处为 v1.29）， 这确保了 PSA 规则仅在指定的 Kubernetes 版本下生效，避免与未来版本的 Kubernetes 发生冲突。</span>
    <span class="attr">pod-security.kubernetes.io/enforce-version:</span> <span class="string">v1.29</span>
    <span class="comment"># 当 Pod 不符合 Baseline 标准时，不阻止创建，但会生成警告信息（通过 API 响应或事件日志）。</span>
    <span class="attr">pod-security.kubernetes.io/warn:</span> <span class="string">baseline</span>
    <span class="comment"># 指定 warn 规则所使用的 Kubernetes 版本，与 enforce-version 保持一致（v1.29），确保警告规则与强制规则基于相同的标准定义</span>
    <span class="attr">pod-security.kubernetes.io/warn-version:</span> <span class="string">v1.29</span>

<span class="comment"># 当同时指定 enforce: baseline 和 warn: baseline 时，Pod 创建流程如下：</span>
<span class="comment"># - 先检查 enforce 规则：</span>
<span class="comment">#   若 Pod 完全符合 baseline 标准 → 允许创建，进入下一步。</span>
<span class="comment">#   若 Pod 违反 baseline 核心约束（如特权容器、特权升级等）→ 直接拒绝创建，流程终止。</span>
<span class="comment"># - 再检查 warn 规则（仅当 enforce 允许创建时）：</span>
<span class="comment">#   若 Pod 存在潜在风险（如使用了不推荐但未被 enforce 禁止的配置）→ 生成警告信息（如 Warning: Pod violates PodSecurity &quot;baseline:v1.29&quot;）。</span>
<span class="comment">#   若 Pod 完全符合 baseline 标准 → 无警告，Pod 正常运行。</span></code></pre>



<p><strong>执行资源清单：</strong></p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单</span>
$ kubectl apply -f my-baseline-namespace.yaml 

<span class="comment"># 查看名称空间</span>
$ kubectl get ns
NAME                    STATUS   AGE
kube-node-lease         Active   40d
kube-public             Active   40d
kube-system             Active   40d
my-baseline-namespace   Active   4s
network                 Active   37d</code></pre>


</li>
<li><p>创建pod</p>
<ul>
<li><p>创建一个违反baseline策略的pod</p>
<p>资源清单：<code>fail-hostnamespaces.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">namespace:</span> <span class="string">my-baseline-namespace</span>
  <span class="attr">name:</span> <span class="string">fail-hostnamespaces</span>
<span class="attr">spec:</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">fail-hostnamespaces</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">fail-hostnamespaces</span>
    <span class="attr">spec:</span>
      <span class="attr">hostPID:</span> <span class="literal">true</span> <span class="comment"># 与主机共享PID</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span>
          <span class="attr">image:</span> <span class="string">nginx:1.29.0</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="attr">securityContext:</span>
            <span class="attr">privileged:</span> <span class="literal">true</span> <span class="comment"># 启用特权模式</span></code></pre>



<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 提示 容器创建异常</span>
$ kubectl apply -f fail-hostnamespaces.yaml 
Warning: would violate PodSecurity <span class="string">&quot;baseline:v1.29&quot;</span>: host namespaces (hostPID=<span class="literal">true</span>), privileged (container <span class="string">&quot;nginx&quot;</span> must not <span class="built_in">set</span> securityContext.privileged=<span class="literal">true</span>)
deployment.apps/fail-hostnamespaces created

<span class="comment"># 只有Deploy，Pod创建失败</span>
$ kubectl get deployment -n my-baseline-namespace
NAME                  READY   UP-TO-DATE   AVAILABLE   AGE
fail-hostnamespaces   0/1     0            0           16s</code></pre>




</li>
<li><p>创建不违反 baseline 策略的 pod，设定 Pod 的 hostPID&#x3D;false，securityContext.privileged&#x3D;false</p>
<p>资源清单：<code>success-hostnamespaces.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">namespace:</span> <span class="string">my-baseline-namespace</span>
  <span class="attr">name:</span> <span class="string">success-hostnamespaces</span>
<span class="attr">spec:</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">fail-hostnamespaces</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">fail-hostnamespaces</span>
    <span class="attr">spec:</span>
      <span class="attr">hostPID:</span> <span class="literal">false</span> <span class="comment"># 不与主机共享PID</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span>
          <span class="attr">image:</span> <span class="string">nginx:1.29.0</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="attr">securityContext:</span>
            <span class="attr">privileged:</span> <span class="literal">false</span> <span class="comment"># 禁用特权模式</span></code></pre>



<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 创建Pod</span>
$ kubectl apply -f success-hostnamespaces.yaml

<span class="comment"># Pod成功启动</span>
$ kubectl get pods -n my-baseline-namespace
NAME                                      READY   STATUS    RESTARTS   AGE
success-hostnamespaces-759ccb9dcd-x9cp6   1/1     Running   0          12s</code></pre></li>
</ul>
</li>
</ol>
<h3 id="4-2-Restricted策略"><a href="#4-2-Restricted策略" class="headerlink" title="4.2 Restricted策略"></a>4.2 Restricted策略</h3><p>Restricted 策略目标是实施当前保护 Pod 的最佳实践，在官方介绍中此策略主要针对运维人员和安全性很重要的应用开发人员，以及不太被信任的用户。该策略包含所有的 baseline 策略的内容，额外增加： 限制可以通过 PersistentVolumes 定义的非核心卷类型、禁止（通过 SetUID 或 SetGID 文件模式）获得特权提升、必须要求容器以非 root 用户运行、Containers 不可以将 runAsUser 设置为 0、 容器组必须弃用 ALL capabilities 并且只允许添加 NET_BIND_SERVICE 能力。</p>
<p>restricted 策略进一步的限制在容器内获取 root 权限，linux内核功能。例如针对 kubernetes 网络的中间人攻击需要拥有Linux系统的 CAP_NET_RAW 权限来发送ARP包。</p>
<ol>
<li><p>创建名为 my-restricted-namespace 的 namespace，并设定 enforce 和 warn 两种模式都对应 Restricted 等级的 Pod 安全标准策略：</p>
<p>资源清单：<code>my-restricted-namespace.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">v1</span> <span class="comment"># 命名空间的 API 版本（固定为 v1）</span>
<span class="attr">kind:</span> <span class="string">Namespace</span> <span class="comment"># 资源类型：命名空间（用于隔离集群资源）</span>
<span class="attr">metadata:</span>
  <span class="attr">name:</span> <span class="string">my-restricted-namespace</span> <span class="comment"># 命名空间名称，Pod 将在此命名空间内运行</span>
  <span class="attr">labels:</span> <span class="comment"># 核心：通过标签配置 Pod 安全策略（PSA 规则）</span>
    <span class="comment"># 强制实施 Baseline 级别的安全标准，所有在该命名空间创建的 Pod 必须符合此标准，否则会被拒绝创建。</span>
    <span class="attr">pod-security.kubernetes.io/enforce:</span> <span class="string">restricted</span>
    <span class="comment"># 指定 enforce 规则所使用的 Kubernetes 版本（此处为 v1.29）， 这确保了 PSA 规则仅在指定的 Kubernetes 版本下生效，避免与未来版本的 Kubernetes 发生冲突。</span>
    <span class="attr">pod-security.kubernetes.io/enforce-version:</span> <span class="string">v1.29</span>
    <span class="comment"># 当 Pod 不符合 Restricted 标准时，不阻止创建，但会生成警告信息（通过 API 响应或事件日志）。</span>
    <span class="attr">pod-security.kubernetes.io/warn:</span> <span class="string">restricted</span>
    <span class="comment"># 指定 warn 规则所使用的 Kubernetes 版本，与 enforce-version 保持一致（v1.29），确保警告规则与强制规则基于相同的标准定义</span>
    <span class="attr">pod-security.kubernetes.io/warn-version:</span> <span class="string">v1.29</span></code></pre>



<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 创建名称空间</span>
$ kubectl apply -f my-restricted-namespace.yaml 
namespace/my-restricted-namespace created

<span class="comment"># 查看</span>
$ kubectl get ns | grep restricted
my-restricted-namespace   Active   12s</code></pre>


</li>
<li><p>创建pod</p>
<ul>
<li><p>创建一个违反 Restricted 策略的 pod</p>
<p>资源清单：<code>fail-restricted-pod.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">namespace:</span> <span class="string">my-restricted-namespace</span>
  <span class="attr">name:</span> <span class="string">fail-restricted</span>
<span class="attr">spec:</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">fail-restricted</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">fail-restricted</span>
    <span class="attr">spec:</span>
      <span class="attr">hostPID:</span> <span class="literal">true</span> <span class="comment"># 与主机共享PID</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">alpine</span>
          <span class="attr">image:</span> <span class="string">alpine:3.22.1</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="attr">command:</span> <span class="comment"># 容器启动命令</span>
            <span class="bullet">-</span> <span class="string">/bin/sleep</span>
            <span class="bullet">-</span> <span class="string">&quot;3600&quot;</span>
          <span class="attr">securityContext:</span>
            <span class="attr">privileged:</span> <span class="literal">true</span> <span class="comment"># 启用特权模式</span></code></pre>



<p>执行资源清单</p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单，提示异常</span>
$ kubectl apply -f fail-restricted-pod.yaml 
Warning: would violate PodSecurity <span class="string">&quot;restricted:v1.29&quot;</span>: host namespaces (hostPID=<span class="literal">true</span>), privileged (container <span class="string">&quot;alpine&quot;</span> must not <span class="built_in">set</span> securityContext.privileged=<span class="literal">true</span>), allowPrivilegeEscalation != <span class="literal">false</span> (container <span class="string">&quot;alpine&quot;</span> must <span class="built_in">set</span> securityContext.allowPrivilegeEscalation=<span class="literal">false</span>), unrestricted capabilities (container <span class="string">&quot;alpine&quot;</span> must <span class="built_in">set</span> securityContext.capabilities.drop=[<span class="string">&quot;ALL&quot;</span>]), runAsNonRoot != <span class="literal">true</span> (pod or container <span class="string">&quot;alpine&quot;</span> must <span class="built_in">set</span> securityContext.runAsNonRoot=<span class="literal">true</span>), seccompProfile (pod or container <span class="string">&quot;alpine&quot;</span> must <span class="built_in">set</span> securityContext.seccompProfile.<span class="built_in">type</span> to <span class="string">&quot;RuntimeDefault&quot;</span> or <span class="string">&quot;Localhost&quot;</span>)
deployment.apps/fail-restricted created

<span class="comment"># 查看 Deploy，Pod未启动</span>
$ kubectl get deployment -n my-restricted-namespace
NAME              READY   UP-TO-DATE   AVAILABLE   AGE
fail-restricted   0/1     0            0           53s

$ kubectl get pods -n my-restricted-namespace
No resources found <span class="keyword">in</span> my-restricted-namespace namespace.</code></pre>


</li>
<li><p>创建不违反 Restricted 策略的 pod，设定 Pod 的 securityContext.runAsNonRoot&#x3D;true，Drop 所有 linux 能力。</p>
<p>资源清单：<code>success-restricted-pod.yaml</code></p>
<pre><code class="highlight yaml"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span>
<span class="attr">kind:</span> <span class="string">Deployment</span>
<span class="attr">metadata:</span>
  <span class="attr">namespace:</span> <span class="string">my-restricted-namespace</span>
  <span class="attr">name:</span> <span class="string">success-restricted</span>
<span class="attr">spec:</span>
  <span class="attr">selector:</span>
    <span class="attr">matchLabels:</span>
      <span class="attr">app:</span> <span class="string">success-restricted</span>
  <span class="attr">template:</span>
    <span class="attr">metadata:</span>
      <span class="attr">labels:</span>
        <span class="attr">app:</span> <span class="string">success-restricted</span>
    <span class="attr">spec:</span>
      <span class="attr">hostPID:</span> <span class="literal">false</span> <span class="comment"># 不与主机共享PID</span>
      <span class="attr">containers:</span>
        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-nonroot</span>
          <span class="attr">image:</span> <span class="string">nginx-nonroot:1.0</span>
          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>
          <span class="comment"># 容器级别的安全上下文</span>
          <span class="attr">securityContext:</span>
            <span class="comment"># 以非root启动</span>
            <span class="attr">runAsNonRoot:</span> <span class="literal">true</span>
            <span class="comment"># 运行容器的用户ID</span>
            <span class="attr">runAsUser:</span> <span class="number">101</span>
            <span class="comment"># 不允许权限提升</span>
            <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span>
            <span class="comment"># 禁用所有能力</span>
            <span class="attr">capabilities:</span>
              <span class="attr">drop:</span>
                <span class="bullet">-</span> <span class="string">ALL</span>
      <span class="comment"># Pod级别的安全上下文</span>
      <span class="attr">securityContext:</span>
        <span class="comment"># 不允许以root启动</span>
        <span class="attr">runAsNonRoot:</span> <span class="literal">true</span>
        <span class="comment"># 不允许使用默认的seccomp profile</span>
        <span class="attr">seccompProfile:</span>
          <span class="attr">type:</span> <span class="string">RuntimeDefault</span></code></pre>



<p><strong>执行资源清单</strong></p>
<pre><code class="highlight bash"><span class="comment"># 执行资源清单，创建Pod</span>
$ kubectl apply -f success-restricted-pod.yaml 
deployment.apps/success-restricted created

<span class="comment"># 查看Pod 已成功运行</span>
$ kubectl get deployment -n my-restricted-namespace
NAME                 READY   UP-TO-DATE   AVAILABLE   AGE
success-restricted   1/1     1            1           28s</code></pre></li>
</ul>
</li>
</ol>
<h1 id="四、pod-security-admission当前局限性"><a href="#四、pod-security-admission当前局限性" class="headerlink" title="四、pod security admission当前局限性"></a>四、pod security admission当前局限性</h1><p>如果你的集群中已经配置PodSecurityPolicy，考虑把它们迁移到pod security admission是需要一定的工作量的。</p>
<p>首先需要考虑当前的pod security admission是否适合你的集群，目前它旨在满足开箱即用的最常见的安全需求，与PSP相比它存在以下差异：</p>
<ul>
<li>pod security admission 只是对 pod 进行安全标准的检查，不支持对 pod 进行修改，不能为 pod 设置默认的安全配置。</li>
<li>pod security admission 只支持官方定义的三种安全标准策略，不支持灵活的自定义安全标准策略。这使得不能完全将 PSP 规则迁移到 pod security admission，需要进行具体的安全规则考量。</li>
<li>pod security admission 不像 PSP 一样可以与具体的用户进行绑定，只支持豁免特定的用户或者 RuntimeClass 及 namespace。</li>
</ul>
<p><strong>参考链接</strong></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://support.huaweicloud.com/usermanual-cce/cce_10_0402.html">https://support.huaweicloud.com/usermanual-cce/cce_10_0402.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhangmingcheng/p/17640118.html">https://www.cnblogs.com/zhangmingcheng/p/17640118.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bocloud/p/16107335.html">https://www.cnblogs.com/bocloud/p/16107335.html</a></p>
<p><a target="_blank" rel="noopener" href="https://waynerv.com/posts/enable-pod-security-policy-for-cluster/">https://waynerv.com/posts/enable-pod-security-policy-for-cluster/</a></p>
</blockquote>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 george_95@126.com </span>
    </div>
</article>





    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: 'f820fe811764cacedc4f',
            clientSecret: '0ce07abb65f0e79ddb8830f32029b8a9656e0ee0',
            repo: 'georgechan95.github.io',
            owner: 'GeorgeChan95',
            admin: ['GeorgeChan95'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('15',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2016-2020 George
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
    #post .pjax article :not(pre) > code {
        color: #24292e;
        font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
        background-color: rgba(27,31,35,.05);
        border-radius: 3px;
        font-size: 85%;
        margin: 0;
        padding: .2em .4em;
    }
    
</style>







</html>
